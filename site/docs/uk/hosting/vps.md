# Хостинг: VPS

Віртуальний приватний сервер, відомий переважно як VPS, є віртуальною машиною, яка працює в хмарі, а користувачі мають повний контроль над її системою.

[CI/CD](https://about.gitlab.com/topics/ci-cd/) - це важлива складова сучасного процесу розробки програмного забезпечення.
Цей посібник охоплює майже весь [конвеєр CI/CD](https://about.gitlab.com/topics/ci-cd/cicd-pipeline/) і дещо окрім цього.
Загалом у цьому посібнику ви дізнаєтеся наступне:

1. **Оренда сервера та домену**.
   У якості хостера буде використаний [Hostinger](https://hostinger.com.ua/).
   > Зауважте, що сервер вам потрібний обовʼязково, а домен лише якщо розгортаєте бота на вебхуках.
   > У цьому посібнику описано обидва варіанти.
2. **Встановлення та налаштування панелі керування**.
   У цьому посібнику буде використана [Fastpanel](https://fastpanel.direct/).
3. **Безпекові питання.**
4. **Написання скриптів CI/CD для GitHub та GitLab.**
5. **Підтримка безперервної роботи бота.**

## Налаштування сервера

Для цього посібника ми обрали [Hostinger](https://hostinger.com.ua/).
На те є кілька причин:

1. Він мультиязичний, тож вам буде зручно й зрозуміло ним користуватися.
2. У нього дуже багата документація, яка ретельно покриває всі проблемні місця, з якими може стикнутися новачок.
3. Він пропонує потужні сервери за досить низькими цінами.

З хостером познайомилися - можемо починати працювати! :rocket:

### Оренда сервера (обовʼязково)

:::tip Аналог серверу
Якщо ви не можете або не хочете орендувати сервер, ви можете замінити його віртуальною машиною.
Для цього скористайтеся програмою на кшталт [VirtualBox](https://virtualbox.org/).
Створіть віртуальну машину з потрібним дистрибутивом Linux й користуйтеся нею, як справжнім сервером.
:::

Перейдіть до [каталогу тарифів VPS](https://hostinger.com.ua/vps-hosting/).
Ми скористаємося тарифом "VPS 1".
Нижче ви можете побачити порівняльну таблицу, в якій описані запропоновані серверні ресурси й ліміти.
Ресурсів "VPS 1" достатньо для ботів з невеликою аудиторією, а для нашого тестового бота тим паче.

Поверніться до картки "VPS 1" й натисніть кнопку "Додати".
Вас буде автоматично перенаправлено на сторінку оформлення замовлення, де ви також одразу зареєструєтеся у Hostinger.

:::warning Змініть строк оренди!
Типовий строк оренди - 2 роки, і коштує це величезних грошей.
Вам цього напевно не треба, тому для початку орендуйте сервер на місяць, що коштує значно дешевше.

У будь-якому разі Hostinger надає 30-денну гарантію повернення грошей.
:::

Після оплати ви зможете налаштувати свій сервер:

1. **Місцезнаходження.**
   Ми рекомендуємо обрати найближче до вас розташування.
2. **Тип сервера.**
   Оскільки ми встановлюватимемо сторонню панель керування, обираємо варіант "Чиста ОС".
3. **Операційна система.**
   Перелік підтримуваних Fastpanel операційних систем ви можете знайти [тут](https://fastpanel.direct/wiki/en/how-to-install-fastpanel).
   Ми скористаємося Ubuntu 22.04.
   Якщо ви обрали іншу систему, деякі кроки можуть відрізнятися, тому будьте пильними.
4. **Назва сервера.**
5. **Root пароль.**
   Придумайте сильний пароль й бережіть його у надійному сховищі!
6. **SSH ключ.**
   Ми налаштуємо його пізніше, тому поки що пропустіть цей крок.

Готово! :tada:

### Оренда домену (лише для вебхуків)

Щоб звʼязати бота, який працює за допомогою вебхуків, із зовнішнім світом, потрібно придбати домен.

Перейдіть на [сторінку пошуку доменних імен](https://hostinger.com.ua/kupyty-domen).
У полі введення тексту введіть доменне імʼя виду `<назва>.<зона>`.
Наприклад, `example.com`.

Якщо бажаний домен вільний, натисніть кнопку "Додати" поряд із ним.
Вас буде автоматично перенаправлено на сторінку оформлення замовлення, де ви також одразу зареєструєтеся у Hostinger, якщо досі не зареєстровані.
Оплатіть домен.

#### Направлення домена на VPS

Перш ніж ваш домен зможе працювати з вашим VPS, вам потрібно направити домен на свій сервер.
Щоб це зробити, на [панелі керування Hostinger](https://hpanel.hostinger.com/) натисніть кнопку "Керувати" поряд із вашим доменом.
Далі перейдіть на сторінку керування записами DNS, натиснувши кнопку "DNS / Сервери імен" у меню зліва.

> Спершу дізнайтеся IP-адресу свого VPS.

У списку DNS записів знайдіть запис типу `A` з іменем `@`.
Відредагуйте цей запис, змінивши IP-адресу в полі "Вказує на" на IP-адресу вашого VPS, а TTL вкажіть 3600.

Далі знайдіть й видаліть запис типу `CNAME` з іменем `www`.
Замість нього створіть новий запис типу `A` з іменем `www`, який вказуватиме на IP-адресу вашого VPS, а TTL вкажіть 3600.

> У разі винекнення труднощів скористайтеся іншим способом, описаним у [базі знань](https://support.hostinger.com/uk/articles/1583227-%D1%8F%D0%BA-%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B8-%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD-%D0%BD%D0%B0-vps).

Готово! :tada:

## Налаштування панелі керування

## CI/CD

## Підтримка безперервної роботи бота
