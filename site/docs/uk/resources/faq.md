# FAQ

Тут зібрана колекція із найбільш частими запитаннями щодо [поширених помилок](#чому-я-отримую-цю-помилку) та [Deno речей](#запитання-про-deno).

Якщо це FAQ не відповідає на ваше питання, вам також варто звернутися до [Bot FAQ](https://core.telegram.org/bots/faq), написаної командою Telegram.

## Де я можу знайти довідку про метод?

У довідці по API.
Також вам, напевно, буде корисним ознайомитися з [посібником](../guide).

## У методі відсутній параметр

Ні, це не так.

1. Переконайтеся, що у вас встановлена остання версія grammy.
2. Перевірте, чи є параметр необов'язковим.
   Якщо так, то grammY збере його в об'єкті опцій під назвою `other`.
   Передайте туди `{ parameter_name: value }` і все буде працювати.
   Як завжди, TypeScript автоматично доповнить назви параметрів за вас.

## Чому я отримую цю помилку?

### 400 Bad Request: Cannot parse entities

Ви надсилаєте повідомлення з форматуванням, тобто встановлюєте `parse_mode` під час надсилання повідомлення.
Однак ваше форматування порушено, тому Telegram не знає, як його розбирати.
Вам слід перечитати [розділ про форматування](https://core.telegram.org/bots/api#formatting-options) в документації до Telegram.
Байтовий зсув, який згадується в повідомленні про помилку, підкаже вам, де саме у вашому рядку є помилка.

::: tip Передача сутностей замість форматування
Ви можете попередньо розбирати сутності для Telegram, якщо хочете, та вказати `entities` під час надсилання повідомлення.
Тоді текст вашого повідомлення може бути звичайним рядком.
Таким чином, вам не доведеться турбуватися про екранування дивних символів.
Може здатися, що це потребує більше коду, але насправді це набагато надійніше і безпечніше рішення цієї проблеми.
Найголовніше, що це значно спрощується за допомогою нашого [parse-mode](../plugins/parse-mode.md) плагіна.
:::

### 401 Unauthorized

Ваш токен бота неправильний.
Можливо, ви думаєте, що він правильний.
Але це не так.
Поговоріть з [@BotFather](https://t.me/BotFather), щоб дізнатися, який токен у бота.

### 403 Forbidden: bot was blocked by the user

Ймовірно, ви намагалися надіслати повідомлення користувачеві, а потім зіткнулися з цією проблемою.

Коли користувач блокує вашого бота, ви не можете надсилати йому повідомлення або взаємодіяти з ним будь-яким іншим чином, за винятком випадків, коли ваш бот був запрошений до групового чату, учасником якого є цей користувач.
Telegram робить це, щоб захистити своїх користувачів.
Ви не можете нічого з цим зробити.

Ви можете:

- Виправити помилку і, наприклад, видалити дані користувача з вашої бази даних.
- Проігнорувати помилку.
- Слухати оновлення `my_chat_member` через `bot.on("my_chat_member")`, щоб отримувати сповіщення, коли користувач заблокує вашого бота.
  Підказка: Порівняйте поля `status` старого і нового учасника чату.

### 404 Not found

Якщо це відбувається під час запуску бота, значить, ваш токен бота неправильний.
Поговоріть з [@BotFather](https://t.me/BotFather), щоб дізнатися, який у вас токен.

Якщо ваш бот працює нормально більшу частину часу, але раптом ви отримуєте помилку 404, значить, ви робите щось дуже дивне.
Ви можете запитати нас в [груповому чаті](https://t.me/grammyjs) (або в [російськомовному груповому чаті](https://t.me/grammyjs_ru)).

### 409 Conflict: terminated by other getUpdates request

Ви випадково запустили бота двічі під час тривалого опитування.
Ви можете запустити лише один екземпляр бота.

Якщо ви вважаєте, що запустили бота лише один раз, ви можете просто змінити токен бота.
Це зупинить всі інші екземпляри.
Зверніться до [@BotFather](https://t.me/BotFather), щоб зробити це.

### 429: Too Many Requests: retry after X

Вітаємо!
Ви зіткнулися з помилкою, яка є однією з найскладніших для виправлення.

Існує два можливих сценарії розвитку подій:

**Перший:** Ваш бот має небагато користувачів.
У такому випадку ви просто спамите до серверів Telegram, надсилаючи занадто багато запитів.
Рішення: не робіть цього!
Вам варто серйозно подумати про те, як суттєво зменшити кількість викликів API.

**Друге:** Ваш бот стає дуже популярним і має багато користувачів (сотні тисяч).
Ви вже подбали про те, щоб використовувати мінімальну кількість викликів API для найпоширеніших операцій вашого бота, і все одно стикаєтеся з цими помилками, так зване flood wait.

Є кілька речей, які ви можете зробити:

1. Прочитати [статтю](../advanced/flood.md) в документації, щоб отримати базове розуміння ситуації.
2. Використовувати плагін [`transformer-throttler`](../plugins/transformer-throttler.md).
3. Використовувати плагін [`auto-retry`](../plugins/auto-retry.md).
4. Зверніться за допомогою до нас у [груповий чат](https://t.me/grammyjs).
   Там є досвідчені люди.
5. Можна попросити Telegram збільшити ліміти, але це дуже малоймовірно, якщо ви не виконали кроки 1-3.

### Cannot find type definition file for 'node-fetch'

Це результат деяких відсутніх оголошень типів.

Рекомендованим способом виправлення є встановлення `skipLibCheck` у значення `true` у параметрах компіляції TypeScript.

Якщо ви впевнені, що вам потрібно залишити цей параметр у значенні `false`, ви можете замість цього встановити відсутні визначення типів, виконавши `npm i -D @types/node-fetch@2`.

## Запитання про Deno

### Чому ви підтримуєте Deno?

Кілька важливих причин, чому ми любимо Deno більше, ніж Node.js:

- Простіше і швидше почати роботу.
- Інструментарій значно кращий.
- Він виконує TypeScript за замовчуванням.
- Не потрібно підтримувати `package.json` або `node_modules`.
- Має перевірену стандартну бібліотеку.

> Deno був заснований Райаном Далом (Ryan Dahl) - тією ж людиною, яка заснувала Node.js.
> Він розповів про свої 10 причин жалітись про Node.js у цьому [відео](https://youtu.be/M3BM9TB-8yA).

grammY - це перша бібліотека Deno, і вона також підтримує Node.js з обратньою сумістністю.
