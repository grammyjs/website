---
prev: false
next: false
---

# –°–µ—Å—ñ—ó —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (–≤–±—É–¥–æ–≤–∞–Ω–æ)

–•–æ—á–∞ –≤–∏ –∑–∞–≤–∂–¥–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –∫–æ–¥ –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –≤–∏–±—Ä–∞–Ω–æ–≥–æ –≤–∞–º–∏ —Å—Ö–æ–≤–∏—â–∞ –¥–∞–Ω–∏—Ö, grammY –ø—ñ–¥—Ç—Ä–∏–º—É—î –¥—É–∂–µ –∑—Ä—É—á–Ω–∏–π —à–∞–±–ª–æ–Ω –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—ñ–¥ –Ω–∞–∑–≤–æ—é _—Å–µ—Å—ñ—ó_.

> [–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤–Ω–∏–∑](#—è–∫-–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏-—Å–µ—Å—ñ—ñ), —è–∫—â–æ –≤–∏ –≤–∂–µ –∑–Ω–∞—î—Ç–µ, —è–∫ –ø—Ä–∞—Ü—é—é—Ç—å —Å–µ—Å—ñ—ó.

## –ß–æ–º—É –º–∏ –ø–æ–≤–∏–Ω–Ω—ñ –¥—É–º–∞—Ç–∏ –ø—Ä–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö?

–ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –∑–≤–∏—á–∞–π–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É Telegram, –±–æ—Ç–∏ –º–∞—é—Ç—å [–æ–±–º–µ–∂–µ–Ω–µ —Ö–º–∞—Ä–Ω–µ —Å—Ö–æ–≤–∏—â–µ](https://core.telegram.org/bots#how-are-bots-different-from-users) —É —Ö–º–∞—Ä—ñ Telegram.
–£–Ω–∞—Å–ª—ñ–¥–æ–∫ —Ü—å–æ–≥–æ, —î –∫—ñ–ª—å–∫–∞ —Ä–µ—á–µ–π, —è–∫—ñ –≤–∏ –Ω–µ –º–æ–∂–µ—Ç–µ —Ä–æ–±–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –±–æ—Ç—ñ–≤:

1. –í–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–∞—Ä–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, —è–∫—ñ –æ—Ç—Ä–∏–º–∞–≤ –≤–∞—à –±–æ—Ç.
2. –í–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–∞—Ä–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, –Ω–∞–¥—ñ—Å–ª–∞–Ω–∏—Ö –≤–∞—à–∏–º –±–æ—Ç–æ–º.
3. –í–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö —á–∞—Ç—ñ–≤ –∑ –≤–∞—à–∏–º –±–æ—Ç–æ–º.
4. –ë–∞–≥–∞—Ç–æ —ñ–Ω—à–∏—Ö —Ä–µ—á–µ–π: –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –æ–≥–ª—è–¥—É –º–µ–¥—ñ–∞–∫–æ–Ω—Ç–µ–Ω—Ç—É —Ç–æ—â–æ.

–ü–æ —Å—É—Ç—ñ, —Ü–µ –∑–≤–æ–¥–∏—Ç—å—Å—è –¥–æ —Ç–æ–≥–æ, —â–æ **–±–æ—Ç –º–∞—î –¥–æ—Å—Ç—É–ø –ª–∏—à–µ –¥–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø–æ—Ç–æ—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —Ç–æ–±—Ç–æ –¥–æ —Ç—ñ—î—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó, —è–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –æ–± º—î–∫—Ç—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É `ctx`.

–û—Ç–∂–µ, —è–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–∞—Ä–∏—Ö –¥–∞–Ω–∏—Ö, –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —ó—Ö –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –Ω–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è.
–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ —É –≤–∞—Å –º–∞—î –±—É—Ç–∏ —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö: —Ñ–∞–π–ª, –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –∞–±–æ —Å—Ö–æ–≤–∏—â–µ –≤ –ø–∞–º º—è—Ç—ñ.

–ó–≤—ñ—Å–Ω–æ, grammY –º–∞—î –≤—Å–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–µ –¥–ª—è —Ü—å–æ–≥–æ, —Ç–æ–º—É –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ —Ü–∏–º –∑–∞–π–º–∞—Ç–∏—Å—è.
–í–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å—Ö–æ–≤–∏—â–µ —Å–µ—Å—ñ–π grammY, —è–∫–µ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –∂–æ–¥–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —ñ —î –∑–∞–≤–∂–¥–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–º.

> –ó–≤–∏—á–∞–π–Ω–æ, —ñ—Å–Ω—É—î –±–µ–∑–ª—ñ—á —ñ–Ω—à–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤, —è–∫—ñ –ø—Ä–æ–ø–æ–Ω—É—é—Ç—å –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —è–∫ –ø–æ—Å–ª—É–≥—É, —ñ grammY —Ç–∞–∫–æ–∂ –ª–µ–≥–∫–æ —ñ–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è –∑ –Ω–∏–º–∏.
> –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≤–ª–∞—Å–Ω—É –±–∞–∑—É –¥–∞–Ω–∏—Ö, —Ç–æ –º–æ–∂–µ—Ç–µ –±—É—Ç–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ grammY –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –Ω–µ—é —Ç–∞–∫ —Å–∞–º–æ –¥–æ–±—Ä–µ.
> [–ü—Ä–æ–∫—Ä—É—Ç—ñ—Ç—å –≤–Ω–∏–∑](#–≤—ñ–¥–æ–º—ñ-–∞–¥–∞–ø—Ç–µ—Ä–∏-—Å—Ö–æ–≤–∏—â), —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏, —è–∫—ñ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –Ω–∞—Ä–∞–∑—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ.

## –©–æ —Ç–∞–∫–µ —Å–µ—Å—ñ—ó?

–î–ª—è –±–æ—Ç—ñ–≤ –¥—É–∂–µ –ø–æ—à–∏—Ä–µ–Ω–∏–º —è–≤–∏—â–µ–º —î –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–µ–≤–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –º–∏ —Ö–æ—á–µ–º–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –±–æ—Ç–∞, —è–∫–∏–π –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–∞–∑—ñ–≤, –∫–æ–ª–∏ —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º—ñ—Å—Ç–∏—Ç—å –µ–º–æ–¥–∑—ñ –ø—ñ—Ü–∏ :pizza:.
–¶—å–æ–≥–æ –±–æ—Ç–∞ –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –≤ –≥—Ä—É–ø—É, —ñ –≤—ñ–Ω —Ä–æ–∑–ø–æ–≤—ñ—Å—Ç—å –≤–∞–º, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –≤–∏ —ñ –≤–∞—à—ñ –¥—Ä—É–∑—ñ –ª—é–±–∏—Ç–µ –ø—ñ—Ü—É.

–ö–æ–ª–∏ –±–æ—Ç –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –≤—ñ–Ω –ø–æ–≤–∏–Ω–µ–Ω –∑–≥–∞–¥–∞—Ç–∏, —Å–∫—ñ–ª—å–∫–∏ —Ä–∞–∑—ñ–≤ –≤—ñ–Ω –±–∞—á–∏–≤ :pizza: —É —Ü—å–æ–º—É —á–∞—Ç—ñ —Ä–∞–Ω—ñ—à–µ.
–ó–≤–∏—á–∞–π–Ω–æ, –≤–∞—à –ª—ñ—á–∏–ª—å–Ω–∏–∫ –ø—ñ—Ü–∏ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è, –∫–æ–ª–∏ –≤–∞—à–∞ —Å–µ—Å—Ç—Ä–∞ –¥–æ–¥–∞—î –±–æ—Ç–∞ –¥–æ —Å–≤–æ–≥–æ –≥—Ä—É–ø–æ–≤–æ–≥–æ —á–∞—Ç—É, —Ç–æ–º—É –º–∏ —Ö–æ—á–µ–º–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ _–æ–¥–∏–Ω –ª—ñ—á–∏–ª—å–Ω–∏–∫ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É_.

–°–µ—Å—ñ—ó --- —Ü–µ –≥–∞—Ä–Ω–∏–π —Å–ø–æ—Å—ñ–± –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö _–¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É_.
–í–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —á–∞—Ç—É —è–∫ –∫–ª—é—á —É –≤–∞—à—ñ–π –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, –∞ –ª—ñ—á–∏–ª—å–Ω–∏–∫ —è–∫ –∑–Ω–∞—á–µ–Ω–Ω—è.
–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –º–∏ –±—É–¥–µ–º–æ –Ω–∞–∑–∏–≤–∞—Ç–∏ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —á–∞—Ç—É _–∫–ª—é—á–æ–º —Å–µ—Å—ñ—ó_.
–í–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ –±—ñ–ª—å—à–µ –ø—Ä–æ –∫–ª—é—á—ñ —Å–µ—Å—ñ—ó [—Ç—É—Ç](#–∫–ª—é—á—ñ-—Å–µ—Å—ñ—ñ).
–§–∞–∫—Ç–∏—á–Ω–æ, –≤–∞—à –±–æ—Ç –±—É–¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é –∑ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞ —á–∞—Ç—É —Ç–∞ –¥–µ—è–∫–∏—Ö –≤–ª–∞—Å–Ω–∏—Ö –¥–∞–Ω–∏—Ö —Å–µ—Å—ñ—ó, —Ç–æ–±—Ç–æ —â–æ—Å—å –Ω–∞ –∫—à—Ç–∞–ª—Ç —Ü—å–æ–≥–æ:

```json
{
  "424242": { "pizzaCount": 24 },
  "987654": { "pizzaCount": 1729 }
}
```

> –ö–æ–ª–∏ –º–∏ –≥–æ–≤–æ—Ä–∏–º–æ "–±–∞–∑–∞ –¥–∞–Ω–∏—Ö", –º–∏ –º–∞—î–º–æ –Ω–∞ —É–≤–∞–∑—ñ –±—É–¥—å-—è–∫–µ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.
> –¶–µ –≤–∫–ª—é—á–∞—î –≤ —Å–µ–±–µ —Ñ–∞–π–ª–∏, —Ö–º–∞—Ä–Ω—ñ —Å—Ö–æ–≤–∏—â–∞ —á–∏ –±—É–¥—å-—â–æ —ñ–Ω—à–µ.

–ì–∞—Ä–∞–∑–¥, –∞–ª–µ —â–æ —Ç–∞–∫–µ –Ω–∞—Ä–∞–∑—ñ —Å–µ—Å—ñ—ó?

–ú–∏ –º–æ–∂–µ–º–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –Ω–∞ –±–æ—Ç–∞, —è–∫–∏–π –±—É–¥–µ –Ω–∞–¥–∞–≤–∞—Ç–∏ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó —á–∞—Ç—É –≤ `ctx.session` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.
–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –ø–ª–∞–≥—ñ–Ω –±—É–¥–µ —Ä–æ–±–∏—Ç–∏ —â–æ—Å—å –¥–æ —ñ –ø—ñ—Å–ª—è –≤–∏–∫–ª–∏–∫—É –Ω–∞—à–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤:

1. **–î–æ –Ω–∞—à–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞.**
   –ü–ª–∞–≥—ñ–Ω —Å–µ—Å—ñ—ó –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ —á–∞—Ç—É –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.
   –í—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ –ø—Ä–æ –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —É –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ `ctx.session`.
2. **–ü—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—à–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞.**
   –ú–∏ –º–æ–∂–µ–º–æ _–ø—Ä–æ—á–∏—Ç–∞—Ç–∏_ `ctx.session`, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–∏–º, —è–∫—ñ –∑–Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö.
   –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –±—É–¥–µ –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–∞—Ç –∑ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–æ–º `424242`, —Ü–µ –±—É–¥–µ `ctx.session = { pizzaCount: 24 }` –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—à–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞; –ø—Ä–∏–Ω–∞–π–º–Ω—ñ, –∑ –Ω–∞–≤–µ–¥–µ–Ω–∏–º –≤–∏—â–µ –ø—Ä–∏–∫–ª–∞–¥–æ–º —Å—Ç–∞–Ω—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.
   –ú–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ–º–æ –¥–æ–≤—ñ–ª—å–Ω–æ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ `ctx.session`, —Ç–æ–±—Ç–æ –¥–æ–¥–∞–≤–∞—Ç–∏, –≤–∏–¥–∞–ª—è—Ç–∏ —Ç–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –ø–æ–ª—è, —è–∫ –Ω–∞–º –∑–∞–º–∞–Ω–µ—Ç—å—Å—è.
3. **–ü—ñ—Å–ª—è –Ω–∞—à–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞.**
   –ü—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ —Å–µ—Å—ñ—ó –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –¥–∞–Ω—ñ –±—É–¥—É—Ç—å –∑–∞–ø–∏—Å–∞–Ω—ñ –Ω–∞–∑–∞–¥ –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.
   –Ø–∫–∏–º –±–∏ –Ω–µ –±—É–ª–æ –∑–Ω–∞—á–µ–Ω–Ω—è `ctx.session` –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ –æ–±—Ä–æ–±–Ω–∏–∫–∞, –≤–æ–Ω–æ –±—É–¥–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö.

–£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –Ω–∞–º –±—ñ–ª—å—à–µ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è —Ç—É—Ä–±—É–≤–∞—Ç–∏—Å—è –ø—Ä–æ —Ñ–∞–∫—Ç–∏—á–Ω–∏–π –∑–≤ º—è–∑–æ–∫ –∑—ñ —Å—Ö–æ–≤–∏—â–µ–º –¥–∞–Ω–∏—Ö.
–ú–∏ –ø—Ä–æ—Å—Ç–æ –∑–º—ñ–Ω—é—î–º–æ –¥–∞–Ω—ñ –≤ `ctx.session`, –∞ –ø–ª–∞–≥—ñ–Ω –ø–æ–¥–±–∞—î –ø—Ä–æ –≤—Å–µ —ñ–Ω—à–µ.

## –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–µ—Å—ñ—ó

> [–ü—Ä–æ–ø—É—Å—Ç—ñ—Ç—å —Ü–µ–π —Ä–æ–∑–¥—ñ–ª](#—è–∫-–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏-—Å–µ—Å—ñ—ñ), —è–∫—â–æ –≤–∏ –≤–∂–µ –∑–Ω–∞—î—Ç–µ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–µ—Å—ñ—ó.

–í–∏ –º–æ–∂–µ—Ç–µ –ø–æ–¥—É–º–∞—Ç–∏, —â–æ —Ü–µ —á—É–¥–æ–≤–æ --- "–ú–µ–Ω—ñ –±—ñ–ª—å—à–µ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è —Ç—É—Ä–±—É–≤–∞—Ç–∏—Å—è –ø—Ä–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö!".
–Ü –≤–∏ –º–∞—î—Ç–µ —Ä–∞—Ü—ñ—é, —Å–µ—Å—ñ—ó --- —ñ–¥–µ–∞–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è, –∞–ª–µ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –ø–µ–≤–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –¥–∞–Ω–∏—Ö.

–ó –Ω–∞—à–æ–≥–æ –¥–æ—Å–≤—ñ–¥—É, —î –≤–∏–ø–∞–¥–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, –∫–æ–ª–∏ —Å–µ—Å—ñ—ó —Å–ø—Ä–∞–≤–¥—ñ –±–ª–∏—Å–∫—É—á—ñ.
–ó —ñ–Ω—à–æ–≥–æ –±–æ–∫—É, —î –≤–∏–ø–∞–¥–∫–∏, –∫–æ–ª–∏ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –º–æ–∂–µ –ø—ñ–¥—ñ–π—Ç–∏ –∫—Ä–∞—â–µ.

–¶–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –º–æ–∂–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏ –≤–∞–º –≤–∏—Ä—ñ—à–∏—Ç–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–µ—Å—ñ—ó —á–∏ –Ω—ñ.

|                   | –°–µ—Å—ñ—ó                                                  | –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö                                                               |
| ----------------- | ------------------------------------------------------ | ------------------------------------------------------------------------ |
| _–î–æ—Å—Ç—É–ø_          | –æ–¥–Ω–µ —ñ–∑–æ–ª—å–æ–≤–∞–Ω–µ —Å—Ö–æ–≤–∏—â–µ **–¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É**           | –¥–æ—Å—Ç—É–ø –¥–æ –æ–¥–Ω–∏—Ö —ñ —Ç–∏—Ö —Å–∞–º–∏—Ö –¥–∞–Ω–∏—Ö –∑ **–∫—ñ–ª—å–∫–æ—Ö —á–∞—Ç—ñ–≤**                    |
| _–°–ø—ñ–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø_ | –¥–∞–Ω—ñ **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –±–æ—Ç–æ–º**                 | –¥–∞–Ω—ñ **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —ñ–Ω—à–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏**: –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–º –≤–µ–±—Å–µ—Ä–≤–µ—Ä–æ–º —Ç–æ—â–æ |
| _–§–æ—Ä–º–∞—Ç_          | –±—É–¥—å-—è–∫—ñ –æ–± º—î–∫—Ç–∏ JavaScript: —Ä—è–¥–∫–∏, —á–∏—Å–ª–∞, –º–∞—Å–∏–≤–∏ —Ç–æ—â–æ | –±—É–¥—å-—è–∫–∏–π —Ñ–æ—Ä–º–∞—Ç: –±—ñ–Ω–∞—Ä–Ω—ñ –∞–±–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ, —Ñ–∞–π–ª–∏ —Ç–æ—â–æ             |
| _–†–æ–∑–º—ñ—Ä –¥–∞–Ω–∏—Ö_    | –±–∞–∂–∞–Ω–æ –º–µ–Ω—à–µ –±–ª–∏–∑—å–∫–æ 3-—Ö –ú–ë –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É           | –±—É–¥—å-—è–∫–∏–π —Ä–æ–∑–º—ñ—Ä                                                         |
| _–û—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å_     | –≤–∏–º–∞–≥–∞—î—Ç—å—Å—è –¥–µ—è–∫–∏–º–∏ –ø–ª–∞–≥—ñ–Ω–∞–º–∏ grammY                   | –ø—ñ–¥—Ç—Ä–∏–º—É—î —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö                                          |

–¶–µ –Ω–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤—Å–µ —Ü–µ _–Ω–µ –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏_, —è–∫—â–æ –≤–∏ –æ–±–∏—Ä–∞—î—Ç–µ —Å–µ—Å—ñ—ó –∞–±–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏ –∑–≤—ñ—Å–Ω–æ –º–æ–∂–µ—Ç–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤–µ–ª–∏–∫—ñ –±—ñ–Ω–∞—Ä–Ω—ñ –¥–∞–Ω—ñ –≤ —Å–µ—Å—ñ—ó.
–û–¥–Ω–∞–∫ –≤–∞—à –±–æ—Ç –Ω–µ –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —Ç–∞–∫ –¥–æ–±—Ä–µ, —è–∫ –º—ñ–≥ –±–∏, —Ç–æ–º—É –º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–µ—Å—ñ—ó –ª–∏—à–µ —Ç–∞–º, –¥–µ –≤–æ–Ω–∏ –º–∞—é—Ç—å —Å–µ–Ω—Å.

## –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–µ—Å—ñ—ó

–í–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É —Å–µ—Å—ñ—ó –¥–æ grammY –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ —Å–µ—Å—ñ—ó.

### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–û—Å—å –ø—Ä–∏–∫–ª–∞–¥ –±–æ—Ç–∞, —è–∫–∏–π –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —â–æ –º—ñ—Å—Ç—è—Ç—å –µ–º–æ–¥–∑—ñ –ø—ñ—Ü–∏ :pizza::

::: code-group

```ts [TypeScript]
import { Bot, Context, session, SessionFlavor } from "grammy";

// –í–∏–∑–Ω–∞—á–∞—î–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞—à–æ—ó —Å–µ—Å—ñ—ó.
interface SessionData {
  pizzaCount: number;
}

// –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, —â–æ–± –≤—ñ–Ω –≤–∫–ª—é—á–∞–≤ —Å–µ—Å—ñ—ó.
type MyContext = Context & SessionFlavor<SessionData>;

const bot = new Bot<MyContext>("");

// –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ —Å–µ—Å—ñ—ó —Ç–∞ –≤–∏–∑–Ω–∞—á–∞—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è —Å–µ—Å—ñ—ó.
function initial(): SessionData {
  return { pizzaCount: 0 };
}
bot.use(session({ initial }));

bot.command("hunger", async (ctx) => {
  const count = ctx.session.pizzaCount;
  await ctx.reply(`–í–∞—à —Ä—ñ–≤–µ–Ω—å –≥–æ–ª–æ–¥—É —Å—Ç–∞–Ω–æ–≤–∏—Ç—å ${count}!`);
});

bot.hears(/.*üçï.*/, (ctx) => ctx.session.pizzaCount++);

bot.start();
```

```js [JavaScript]
const { Bot, session } = require("grammy");

const bot = new Bot("");

// –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ —Å–µ—Å—ñ—ó —Ç–∞ –≤–∏–∑–Ω–∞—á–∞—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è —Å–µ—Å—ñ—ó.
function initial() {
  return { pizzaCount: 0 };
}
bot.use(session({ initial }));

bot.command("hunger", async (ctx) => {
  const count = ctx.session.pizzaCount;
  await ctx.reply(`–í–∞—à —Ä—ñ–≤–µ–Ω—å –≥–æ–ª–æ–¥—É —Å—Ç–∞–Ω–æ–≤–∏—Ç—å ${count}!`);
});

bot.hears(/.*üçï.*/, (ctx) => ctx.session.pizzaCount++);

bot.start();
```

```ts [Deno]
import {
  Bot,
  Context,
  session,
  SessionFlavor,
} from "https://deno.land/x/grammy/mod.ts";

// –í–∏–∑–Ω–∞—á–∞—î–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞—à–æ—ó —Å–µ—Å—ñ—ó.
interface SessionData {
  pizzaCount: number;
}

// –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, —â–æ–± –≤—ñ–Ω –≤–∫–ª—é—á–∞–≤ —Å–µ—Å—ñ—ó.
type MyContext = Context & SessionFlavor<SessionData>;

const bot = new Bot<MyContext>("");

// –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ —Å–µ—Å—ñ—ó —Ç–∞ –≤–∏–∑–Ω–∞—á–∞—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è —Å–µ—Å—ñ—ó.
function initial(): SessionData {
  return { pizzaCount: 0 };
}
bot.use(session({ initial }));

bot.command("hunger", async (ctx) => {
  const count = ctx.session.pizzaCount;
  await ctx.reply(`–í–∞—à —Ä—ñ–≤–µ–Ω—å –≥–æ–ª–æ–¥—É —Å—Ç–∞–Ω–æ–≤–∏—Ç—å ${count}!`);
});

bot.hears(/.*üçï.*/, (ctx) => ctx.session.pizzaCount++);

bot.start();
```

:::

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –Ω–∞–º —Ç–∞–∫–æ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ [–Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É](../guide/context#–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-–æ–± º—î–∫—Ç–∞-–∫–æ–Ω—Ç–µ–∫—Å—Ç—É), —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ —Å–µ—Å—ñ—é –¥–æ—Å—Ç—É–ø–Ω–∏–º —É –Ω—å–æ–º—É.
–†–æ–∑—à–∏—Ä—é–≤–∞—á –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è `SessionFlavor`.

### –ü–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó

–ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–ø–µ—Ä—à–µ –∫–æ–Ω—Ç–∞–∫—Ç—É—î –∑ –≤–∞—à–∏–º –±–æ—Ç–æ–º, –¥–ª—è –Ω—å–æ–≥–æ –Ω–µ–º–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö —Å–µ—Å—ñ—ó.
–¢–æ–º—É –≤–∞–∂–ª–∏–≤–æ –≤–∫–∞–∑–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `initial` –¥–ª—è –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ —Å–µ—Å—ñ—ó.
–ü–µ—Ä–µ–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –≥–µ–Ω–µ—Ä—É—î –Ω–æ–≤–∏–π –æ–± º—î–∫—Ç –∑ –ø–æ—á–∞—Ç–∫–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏ —Å–µ—Å—ñ—ó –¥–ª—è –Ω–æ–≤–∏—Ö —á–∞—Ç—ñ–≤.

```ts
// –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –æ–± º—î–∫—Ç, —è–∫–∏–π –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ —è–∫ –ø–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó.
function createInitialSessionData() {
  return {
    pizzaCount: 0,
    // —ñ–Ω—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
  };
}
bot.use(session({ initial: createInitialSessionData }));
```

–¢–µ —Å–∞–º–µ, –∞–ª–µ –Ω–∞–±–∞–≥–∞—Ç–æ –∫–æ—Ä–æ—Ç—à–µ:

```ts
bot.use(session({ initial: () => ({ pizzaCount: 0 }) }));
```

::: warning –°–ø—ñ–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –æ–± º—î–∫—Ç—ñ–≤
–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –∑–∞–≤–∂–¥–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ _–Ω–æ–≤–∏–π –æ–± º—î–∫—Ç_.
**–ù–ï** —Ä–æ–±—ñ—Ç—å –æ—Å—å —Ü–µ:

```ts
// –ù–ï–ë–ï–ó–ü–ï–ß–ù–û, –ü–û–ì–ê–ù–û, –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û, –ó–£–ü–ò–ù–Ü–¢–¨–°–Ø
const initialData = { pizzaCount: 0 }; // –¢–Ü–õ–¨–ö–ò –ù–ï –¶–ï
bot.use(session({ initial: () => initialData })); // –ó–õ–û
```

–Ø–∫—â–æ –≤–∏ —Ü–µ –∑—Ä–æ–±–∏—Ç–µ, –∫—ñ–ª—å–∫–∞ —á–∞—Ç—ñ–≤ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π –æ–± º—î–∫—Ç —Å–µ—Å—ñ—ó –≤ –ø–∞–º º—è—Ç—ñ.
–û—Ç–∂–µ, –∑–º—ñ–Ω–∞ –¥–∞–Ω–∏—Ö —Å–µ—Å—ñ—ó –≤ –æ–¥–Ω–æ–º—É —á–∞—Ç—ñ –º–æ–∂–µ –≤–∏–ø–∞–¥–∫–æ–≤–æ –≤–ø–ª–∏–Ω—É—Ç–∏ –Ω–∞ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –≤ —ñ–Ω—à–æ–º—É —á–∞—Ç—ñ.
:::

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–∫–ª—é—á–∏—Ç–∏ –æ–ø—Ü—ñ—é `initial`, —Ö–æ—á–∞ –º–∏ –Ω–∞–ø–æ–ª–µ–≥–ª–∏–≤–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ —Ü—å–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç–∏.
–Ø–∫—â–æ –≤–∏ –Ω–µ –≤–∫–∞–∂–µ—Ç–µ –π–æ–≥–æ, —á–∏—Ç–∞–Ω–Ω—è `ctx.session` –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–æ–º–∏–ª–∫–∏ –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

### –ö–ª—é—á—ñ —Å–µ—Å—ñ—ó

> –£ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –æ–ø–∏—Å–∞–Ω–æ –ø—Ä–æ—Å—É–Ω—É—Ç—É –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å, –ø—Ä–æ —è–∫—É –±—ñ–ª—å—à–æ—Å—Ç—ñ –ª—é–¥–µ–π –Ω–µ –≤–∞—Ä—Ç–æ —Ç—É—Ä–±—É–≤–∞—Ç–∏—Å—è.
> –ú–æ–∂–ª–∏–≤–æ, –≤–∏ –∑–∞—Ö–æ—á–µ—Ç–µ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –Ω–∞ —Ä–æ–∑–¥—ñ–ª—ñ –ø—Ä–æ [–∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤–∞—à–∏—Ö –¥–∞–Ω–∏—Ö](#–∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è-–≤–∞—à–∏—Ö-–¥–∞–Ω–∏—Ö).

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∫–∞–∑–∞—Ç–∏, —è–∫–∏–π –∫–ª—é—á —Å–µ—Å—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏, –ø–µ—Ä–µ–¥–∞–≤—à–∏ —Ñ—É–Ω–∫—Ü—ñ—é `getSessionKey` –¥–æ [–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å](/ref/core/sessionoptions#getsessionkey).
–û—Ç–∂–µ, –≤–∏ –º–æ–∂–µ—Ç–µ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ —Å–ø–æ—Å—ñ–± —Ä–æ–±–æ—Ç–∏ –ø–ª–∞–≥—ñ–Ω–∞ —Å–µ—Å—ñ—ó.
–ü–æ—á–∞—Ç–∫–æ–≤–æ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É.
–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `getSessionKey` –¥–æ–∑–≤–æ–ª—è—î –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á-—á–∞—Ç –∞–±–æ —è–∫ –∑–∞–≤–≥–æ–¥–Ω–æ.
–û—Å—å —Ç—Ä–∏ –ø—Ä–∏–∫–ª–∞–¥–∏:

::: code-group

```ts [TypeScript]
// –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º).
function getSessionKey(ctx: Context): string | undefined {
  // –î–æ–∑–≤–æ–ª—è—î–º–æ –≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –≥—Ä—É–ø–æ–≤–æ–≥–æ —á–∞—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è –æ–¥–Ω—ñ—î—é —Å–µ—Å—ñ—î—é,
  // –∞–ª–µ –Ω–∞–¥–∞—î–º–æ –Ω–µ–∑–∞–ª–µ–∂–Ω—É –ø—Ä–∏–≤–∞—Ç–Ω—É —Å–µ—Å—ñ—é –∫–æ–∂–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –≤ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö —á–∞—Ç–∞—Ö
  return ctx.chat?.id.toString();
}

// –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
function getSessionKey(ctx: Context): string | undefined {
  // –ù–∞–¥–∞—î–º–æ –∫–æ–∂–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ —Å–µ—Å—ñ—ó,
  // –¥–æ —è–∫–æ–≥–æ –±—É–¥–µ –¥–æ—Å—Ç—É–ø —É –≥—Ä—É–ø–∞—Ö —Ç–∞ –≤ —ó—Ö–Ω—å–æ–º—É –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É —á–∞—Ç—ñ
  return ctx.from?.id.toString();
}

// –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á-—á–∞—Ç.
function getSessionKey(ctx: Context): string | undefined {
  // –ù–∞–¥–∞—î–º–æ –∫–æ–∂–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –æ–¥–Ω–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ —Å–µ—Å—ñ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É –∑ –±–æ—Ç–æ–º:
  // –Ω–µ–∑–∞–ª–µ–∂–Ω–∞ —Å–µ—Å—ñ—è –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ —Ç–∞ —ó—Ö–Ω—å–æ–≥–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —á–∞—Ç—É
  return ctx.from === undefined || ctx.chat === undefined
    ? undefined
    : `${ctx.from.id}/${ctx.chat.id}`;
}

bot.use(session({ getSessionKey }));
```

```js [JavaScript]
// –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º).
function getSessionKey(ctx) {
  // –î–æ–∑–≤–æ–ª—è—î–º–æ –≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –≥—Ä—É–ø–æ–≤–æ–≥–æ —á–∞—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è –æ–¥–Ω—ñ—î—é —Å–µ—Å—ñ—î—é,
  // –∞–ª–µ –Ω–∞–¥–∞—î–º–æ –Ω–µ–∑–∞–ª–µ–∂–Ω—É –ø—Ä–∏–≤–∞—Ç–Ω—É —Å–µ—Å—ñ—é –∫–æ–∂–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –≤ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö —á–∞—Ç–∞—Ö
  return ctx.chat?.id.toString();
}

// –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
function getSessionKey(ctx) {
  // –ù–∞–¥–∞—î–º–æ –∫–æ–∂–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ —Å–µ—Å—ñ—ó,
  // –¥–æ —è–∫–æ–≥–æ –±—É–¥–µ –¥–æ—Å—Ç—É–ø —É –≥—Ä—É–ø–∞—Ö —Ç–∞ –≤ —ó—Ö–Ω—å–æ–º—É –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É —á–∞—Ç—ñ
  return ctx.from?.id.toString();
}

// –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á-—á–∞—Ç.
function getSessionKey(ctx) {
  // –ù–∞–¥–∞—î–º–æ –∫–æ–∂–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –æ–¥–Ω–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ —Å–µ—Å—ñ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É –∑ –±–æ—Ç–æ–º:
  // –Ω–µ–∑–∞–ª–µ–∂–Ω–∞ —Å–µ—Å—ñ—è –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ —Ç–∞ —ó—Ö–Ω—å–æ–≥–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —á–∞—Ç—É
  return ctx.from === undefined || ctx.chat === undefined
    ? undefined
    : `${ctx.from.id}/${ctx.chat.id}`;
}

bot.use(session({ getSessionKey }));
```

:::

–©–æ—Ä–∞–∑—É, –∫–æ–ª–∏ `getSessionKey` –ø–æ–≤–µ—Ä—Ç–∞—î `undefined`, `ctx.session` –±—É–¥–µ `undefined`.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –≤–∏—Ä—ñ—à—É–≤–∞—á –∫–ª—é—á—ñ–≤ —Å–µ—Å—ñ—ó –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω—å `poll`/`poll_answer` –∞–±–æ `inline_query`, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –Ω–µ –Ω–∞–ª–µ–∂–∞—Ç—å –¥–æ —á–∞—Ç—É: `ctx.chat` –±—É–¥–µ `undefined`.

::: warning –ö–ª—é—á—ñ —Å–µ—Å—ñ—ó —Ç–∞ –≤–µ–±—Ö—É–∫–∏
–ö–æ–ª–∏ –≤–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ –±–æ—Ç–∞ –Ω–∞ –≤–µ–±—Ö—É–∫–∞—Ö, –≤–∞–º —Å–ª—ñ–¥ —É–Ω–∏–∫–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ–ø—Ü—ñ—ó `getSessionKey`.
Telegram –Ω–∞–¥—Å–∏–ª–∞—î –≤–µ–±—Ö—É–∫–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É, —Ç–æ–º—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –∫–ª—é—á—ñ–≤ —Å–µ—Å—ñ—ó —î —î–¥–∏–Ω–æ—é —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é, —è–∫–∞ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –¥–∞–Ω—ñ –Ω–µ –±—É–¥—É—Ç—å –≤—Ç—Ä–∞—á–µ–Ω—ñ.

–Ø–∫—â–æ –≤–∞–º –¥–æ–≤–µ–¥–µ—Ç—å—Å—è —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è —Ü—ñ—î—é –æ–ø—Ü—ñ—î—é, —â–æ –∑–≤—ñ—Å–Ω–æ –≤—Å–µ —â–µ –º–æ–∂–ª–∏–≤–æ, –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –∑–Ω–∞—Ç–∏, —â–æ –≤–∏ —Ä–æ–±–∏—Ç–µ.
–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ —Ä–æ–∑—É–º—ñ—î—Ç–µ –Ω–∞—Å–ª—ñ–¥–∫–∏ —Ç–∞–∫–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, –ø—Ä–æ—á–∏—Ç–∞–≤—à–∏ [—Ü—é —Å—Ç–∞—Ç—Ç—é](../guide/deployment-types) –π –æ—Å–æ–±–ª–∏–≤–æ [—Ü—é](./runner#–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∞-–æ–±—Ä–æ–±–∫–∞-—Ç–∞–º-–¥–µ-—Ü–µ-–Ω–µ–æ–±—Ö—ñ–¥–Ω–æ).
:::

### –ú—ñ–≥—Ä–∞—Ü—ñ—ó —á–∞—Ç—É

–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —Å–µ—Å—ñ—ó –¥–ª—è –≥—Ä—É–ø, –≤–∞–º —Å–ª—ñ–¥ –∑–Ω–∞—Ç–∏, —â–æ –∑–∞ –ø–µ–≤–Ω–∏—Ö –æ–±—Å—Ç–∞–≤–∏–Ω Telegram –º—ñ–≥—Ä—É—î –∑–≤–∏—á–∞–π–Ω—ñ –≥—Ä—É–ø–∏ –≤ —Å—É–ø–µ—Ä–≥—Ä—É–ø–∏, —è–∫ –æ–ø–∏—Å–∞–Ω–æ [—Ç—É—Ç](https://github.com/telegramdesktop/tdesktop/issues/5593).

–¶—è –º—ñ–≥—Ä–∞—Ü—ñ—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏, –∞–ª–µ –≤–æ–Ω–∞ –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ.
–¶–µ –ø–æ–≤ º—è–∑–∞–Ω–æ –∑ —Ç–∏–º, —â–æ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∏–π —á–∞—Ç --- —Ü–µ —Ç–µ—Ö–Ω—ñ—á–Ω–æ –∑–æ–≤—Å—ñ–º —ñ–Ω—à–∏–π —á–∞—Ç, —è–∫–∏–π –º–∞—î —ñ–Ω—à–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä, —Ç–æ–∂ –π–æ–≥–æ —Å–µ—Å—ñ—è –±—É–¥–µ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏—Å—è —ñ–Ω–∞–∫—à–µ.

–ù–∞—Ä–∞–∑—ñ –Ω–µ —ñ—Å–Ω—É—î –±–µ–∑–ø–µ—á–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è —Ü—ñ—î—ó –ø—Ä–æ–±–ª–µ–º–∏, –æ—Å–∫—ñ–ª—å–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –¥–≤–æ—Ö —á–∞—Ç—ñ–≤ —Ç–∞–∫–æ–∂ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É—é—Ç—å—Å—è —Ä—ñ–∑–Ω–∏–º —á–∏–Ω–æ–º.
–¶–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –≥–æ–Ω–æ–∫ –¥–∞–Ω–∏—Ö.
–û–¥–Ω–∞–∫ —î –∫—ñ–ª—å–∫–∞ —Å–ø–æ—Å–æ–±—ñ–≤ –≤–∏—Ä—ñ—à–∏—Ç–∏ —Ü—é –ø—Ä–æ–±–ª–µ–º—É:

- –Ü–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É.
  –î–∞–Ω—ñ —Å–µ—Å—ñ—ó –±–æ—Ç–∞ –±—É–¥—É—Ç—å –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–∫–∏–Ω—É—Ç—ñ –ø—ñ–¥ —á–∞—Å –º—ñ–≥—Ä–∞—Ü—ñ—ó –≥—Ä—É–ø–∏.
  –ü—Ä–æ—Å—Ç–∞ –π –Ω–∞–¥—ñ–π–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, –∞–ª–µ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–∞ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—É –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É.
  –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –º—ñ–≥—Ä–∞—Ü—ñ—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —Ä–æ–∑–º–æ–≤–∏, —è–∫–∞ –≤–µ–¥–µ—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é [–ø–ª–∞–≥—ñ–Ω–∞ —Ä–æ–∑–º–æ–≤](./conversations), —Ä–æ–∑–º–æ–≤–∞ –±—É–¥–µ —Å–∫–∏–Ω—É—Ç–∞.

- –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤ —Å–µ—Å—ñ—ó –ª–∏—à–µ —Ç–∏–º—á–∞—Å–æ–≤—ñ –∞–±–æ –æ–±–º–µ–∂–µ–Ω—ñ —Ç–∞–π–º-–∞—É—Ç–∞–º–∏ –¥–∞–Ω—ñ, –∞ –≤–∞–∂–ª–∏–≤—ñ –¥–∞–Ω—ñ, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø—ñ–¥ —á–∞—Å –º—ñ–≥—Ä–∞—Ü—ñ—ó —á–∞—Ç—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö.
  –ü–æ—Ç—ñ–º –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—É –ª–æ–≥—ñ–∫—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö –∑—ñ —Å—Ç–∞—Ä–æ–≥–æ —Ç–∞ –Ω–æ–≤–æ–≥–æ —á–∞—Ç—É.
  –¶–µ –≤–∏–º–∞–≥–∞—î –±–∞–≥–∞—Ç–æ –∑—É—Å–∏–ª—å —ñ –≤–ø–ª–∏–≤–∞—î –Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å —Ä–æ–±–æ—Ç–∏, –∞–ª–µ —Ü–µ —î–¥–∏–Ω–∏–π –¥—ñ–π—Å–Ω–æ –Ω–∞–¥—ñ–π–Ω–∏–π —Å–ø–æ—Å—ñ–± –≤–∏—Ä—ñ—à–∏—Ç–∏ —Ü—é –ø—Ä–æ–±–ª–µ–º—É.

- –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–æ –º–æ–∂–ª–∏–≤–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–±—Ö—ñ–¥–Ω–∏–π —à–ª—è—Ö, —è–∫–∏–π –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –æ–±–æ–º —á–∞—Ç–∞–º **–±–µ–∑ –≥–∞—Ä–∞–Ω—Ç—ñ—ó –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ**.
  Telegram Bot API –Ω–∞–¥—Å–∏–ª–∞—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑ –¥–≤–æ—Ö —á–∞—Ç—ñ–≤, —â–æ–π–Ω–æ –º—ñ–≥—Ä–∞—Ü—ñ—è –±—É–ª–∞ –∑–∞–ø—É—â–µ–Ω–∞ (–¥–∏–≤—ñ—Ç—å—Å—è –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ `migrate_to_chat_id` –∞–±–æ `migrate_from_chat_id` –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó Telegram API](https://core.telegram.org/bots/api#message)).
  –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º—É, —â–æ –Ω–µ–º–∞—î –≥–∞—Ä–∞–Ω—Ç—ñ—ó, —â–æ —Ü—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±—É–¥—É—Ç—å –Ω–∞–¥—ñ—Å–ª–∞–Ω—ñ –¥–æ —Ç–æ–≥–æ, —è–∫ –∑ º—è–≤–∏—Ç—å—Å—è –Ω–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —Å—É–ø–µ—Ä–≥—Ä—É–ø—ñ.
  –û—Ç–∂–µ, –±–æ—Ç –º–æ–∂–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –Ω–æ–≤–æ—ó —Å—É–ø–µ—Ä–≥—Ä—É–ø–∏ –¥–æ —Ç–æ–≥–æ, —è–∫ –≤—ñ–Ω –¥—ñ–∑–Ω–∞—î—Ç—å—Å—è –ø—Ä–æ –º—ñ–≥—Ä–∞—Ü—ñ—é, —Ç–æ–∂ –≤—ñ–Ω –Ω–µ –∑–º–æ–∂–µ –∑—ñ—Å—Ç–∞–≤–∏—Ç–∏ –¥–≤–∞ —á–∞—Ç–∏, —â–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –≤–∏—â–µ–∑–≥–∞–¥–∞–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º.

- –Ü–Ω—à–∏–º –æ–±—Ö—ñ–¥–Ω–∏–º —à–ª—è—Ö–æ–º –º–æ–∂–µ –±—É—Ç–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è –±–æ—Ç–∞ –ª–∏—à–µ –¥–ª—è —Å—É–ø–µ—Ä–≥—Ä—É–ø –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é [—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó](../guide/filter-queries) –∞–±–æ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è —Å—É–ø–µ—Ä–≥—Ä—É–ø —Ñ—É–Ω–∫—Ü—ñ–π, –ø–æ–≤ º—è–∑–∞–Ω–∏—Ö –ª–∏—à–µ –∑ —Å–µ—Å—ñ—î—é.
  –û–¥–Ω–∞–∫ —Ü–µ –ø–µ—Ä–µ–∫–ª–∞–¥–∞—î –ø—Ä–æ–±–ª–µ–º—É –π –Ω–µ–∑—Ä—É—á–Ω—ñ—Å—Ç—å –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

- –î–æ–∑–≤–æ–ª—å—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ø—Ä–∏–π–º–∞—Ç–∏ —Ä—ñ—à–µ–Ω–Ω—è –≤ —è–≤–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ:
  "–¶–µ–π —á–∞—Ç –º—ñ–≥—Ä—É–≤–∞–≤, –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω—ñ –±–æ—Ç–∞?".
  –ù–∞–±–∞–≥–∞—Ç–æ –Ω–∞–¥—ñ–π–Ω—ñ—à–µ —ñ –ø—Ä–æ–∑–æ—Ä—ñ—à–µ, –Ω—ñ–∂ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –º—ñ–≥—Ä–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ —à—Ç—É—á–Ω–æ –¥–æ–¥–∞–Ω—É –∑–∞—Ç—Ä–∏–º–∫—É, –∞–ª–µ –≥—ñ—Ä—à–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π –¥–æ—Å–≤—ñ–¥.

–ó—Ä–µ—à—Ç–æ—é, —Ä–æ–∑—Ä–æ–±–Ω–∏–∫ —Å–∞–º –≤–∏—Ä—ñ—à—É—î, —è–∫ –ø–æ–≤–æ–¥–∏—Ç–∏—Å—è –∑ —Ü–∏–º –∫—Ä–∞–π–Ω—ñ–º –≤–∏–ø–∞–¥–∫–æ–º.
–ó–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –±–æ—Ç–∞ –º–æ–∂–Ω–∞ –æ–±—Ä–∞—Ç–∏ —Ç–æ–π —á–∏ —ñ–Ω—à–∏–π —Å–ø–æ—Å—ñ–±.
–Ø–∫—â–æ –¥–∞–Ω—ñ, –ø—Ä–æ —è–∫—ñ –π–¥–µ –º–æ–≤–∞, –Ω–µ–¥–æ–≤–≥–æ–≤—ñ—á–Ω—ñ: —Ç–∏–º—á–∞—Å–æ–≤—ñ –∞–±–æ –æ–±–º–µ–∂–µ–Ω—ñ —Ç–∞–π–º-–∞—É—Ç–∞–º–∏, –º—ñ–≥—Ä–∞—Ü—ñ—è —î –º–µ–Ω—à–æ—é –ø—Ä–æ–±–ª–µ–º–æ—é.
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –≤—ñ–¥—á—É—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é —è–∫ –∑–∞—Ç—Ä–∏–º–∫—É, —è–∫—â–æ –≤–æ–Ω–∞ –≤—ñ–¥–±—É–ª–∞—Å—è –Ω–µ–≤–¥–∞–ª–æ, —ñ –π–æ–º—É –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é.

–Ü–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É, –±–µ–∑—É–º–æ–≤–Ω–æ, –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–±, –ø—Ä–æ—Ç–µ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –ø—Ä–æ —Ç–∞–∫—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É.
–í —ñ–Ω—à–æ–º—É –≤–∏–ø–∞–¥–∫—É —Ü–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–ª—É—Ç–∞–Ω–∏–Ω–∏ —ñ –º–æ–∂–µ –∫–æ—à—Ç—É–≤–∞—Ç–∏ –≥–æ–¥–∏–Ω –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è.

### –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤–∞—à–∏—Ö –¥–∞–Ω–∏—Ö

–£ –≤—Å—ñ—Ö –Ω–∞–≤–µ–¥–µ–Ω–∏—Ö –≤–∏—â–µ –ø—Ä–∏–∫–ª–∞–¥–∞—Ö –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ñ–π –ø–∞–º º—è—Ç—ñ, —Ç–æ–º—É, —è–∫ —Ç—ñ–ª—å–∫–∏ –±–æ—Ç –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è, –≤—Å—ñ –¥–∞–Ω—ñ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è.
–¶–µ –∑—Ä—É—á–Ω–æ, –∫–æ–ª–∏ –≤–∏ —Ä–æ–∑—Ä–æ–±–ª—è—î—Ç–µ –±–æ—Ç–∞ –∞–±–æ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏, –∞–¥–∂–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö, –æ–¥–Ω–∞–∫ **—Ü–µ, —à–≤–∏–¥—à–µ –∑–∞ –≤—Å–µ, –Ω–µ –±–∞–∂–∞–Ω–æ —É –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ**.
–£ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –≤–∏ –∑–∞—Ö–æ—á–µ—Ç–µ –∑–±–µ—Ä–µ–≥–∞—Ç–∏ —Å–≤–æ—ó –¥–∞–Ω—ñ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É —Ñ–∞–π–ª—ñ, –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –∞–±–æ —ñ–Ω—à–æ–º—É —Å—Ö–æ–≤–∏—â—ñ.

–í–∞–º —Å–ª—ñ–¥ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è –æ–ø—Ü—ñ—î—é `storage` –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ —Å–µ—Å—ñ—ó, —â–æ–± –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –π–æ–≥–æ –¥–æ –≤–∞—à–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞ –¥–∞–Ω–∏—Ö.
–ú–æ–∂–ª–∏–≤–æ, –¥–ª—è grammY –≤–∂–µ —ñ—Å–Ω—É—î –∞–¥–∞–ø—Ç–µ—Ä —Å—Ö–æ–≤–∏—â–∞, —è–∫–∏–π –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ (–¥–∏–≤—ñ—Ç—å—Å—è [–Ω–∏–∂—á–µ](#–≤—ñ–¥–æ–º—ñ-–∞–¥–∞–ø—Ç–µ—Ä–∏-—Å—Ö–æ–≤–∏—â)), –∞–ª–µ —è–∫—â–æ –Ω—ñ, —Ç–æ –∑–∞–∑–≤–∏—á–∞–π –ø–æ—Ç—Ä—ñ–±–Ω–æ –ª–∏—à–µ 5 —Ä—è–¥–∫—ñ–≤ –∫–æ–¥—É, —â–æ–± —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ü–µ –≤–ª–∞—Å–Ω–æ—Ä—É—á.

## –í—ñ–¥–æ–º—ñ –∞–¥–∞–ø—Ç–µ—Ä–∏ —Å—Ö–æ–≤–∏—â

–ü–æ—á–∞—Ç–∫–æ–≤–æ —Å–µ—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º—É—Ç—å—Å—è [—É –≤–∞—à—ñ–π –ø–∞–º º—è—Ç—ñ](#–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞-–ø–∞–º º—è—Ç—å-–∑–∞-–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) –≤–±—É–¥–æ–≤–∞–Ω–∏–º –∞–¥–∞–ø—Ç–µ—Ä–æ–º.
–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Å—Ç—ñ–π–Ω—ñ —Å–µ—Å—ñ—ó, —è–∫—ñ grammY [–ø—Ä–æ–ø–æ–Ω—É—î –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ](#–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–µ-—Å—Ö–æ–≤–∏—â–µ), –∞–±–æ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—è –¥–æ [–∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å—Ö–æ–≤–∏—â](#—Ä—ñ—à–µ–Ω–Ω—è-–¥–ª—è-–∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö-—Å—Ö–æ–≤–∏—â).

–û—Å—å —Ç–∞–∫ –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –æ–¥–∏–Ω –∑ –∞–¥–∞–ø—Ç–µ—Ä—ñ–≤ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.

```ts
const storageAdapter = ... // –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

bot.use(session({
  initial: ...
  storage: storageAdapter,
}));
```

### –û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞ –ø–∞–º º—è—Ç—å (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)

–ü–æ—á–∞—Ç–∫–æ–≤–æ –≤—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ñ–π –ø–∞–º º—è—Ç—ñ.
–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤—Å—ñ —Å–µ—Å—ñ—ó –±—É–¥—É—Ç—å –≤—Ç—Ä–∞—á–µ–Ω—ñ, —è–∫ —Ç—ñ–ª—å–∫–∏ –≤–∞—à –±–æ—Ç –∑—É–ø–∏–Ω–∏—Ç—å—Å—è.

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–ª–∞—Å `MemorySessionStorage` ([–¥–æ–≤—ñ–¥–∫–∞ API](/ref/core/memorysessionstorage)) –∑ –±–∞–∑–æ–≤–æ–≥–æ –ø–∞–∫–µ—Ç–∞ grammY, —è–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ñ–π –ø–∞–º º—è—Ç—ñ.

```ts
bot.use(session({
  initial: ...
  storage: new MemorySessionStorage() // —Ü–µ —Ç–∞–∫–æ–∂ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
}));
```

### –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–µ —Å—Ö–æ–≤–∏—â–µ

> –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–µ —Å—Ö–æ–≤–∏—â–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–µ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ —Ö–æ–±—ñ-–ø—Ä–æ—î–∫—Ç–∞—Ö.
> –ó–∞—Å—Ç–æ—Å—É–Ω–∫–∏, —è–∫—ñ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è —Ä–æ–±–æ—Ç–∏ —É –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ, –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –≤–ª–∞—Å–Ω—É –±–∞–∑—É –¥–∞–Ω–∏—Ö.
> –°–ø–∏—Å–æ–∫ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å—Ö–æ–≤–∏—â –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è [—Ç—É—Ç](#—Ä—ñ—à–µ–Ω–Ω—è-–¥–ª—è-–∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö-—Å—Ö–æ–≤–∏—â).

–ü–µ—Ä–µ–≤–∞–≥–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è grammY –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ –≤–∏ –æ—Ç—Ä–∏–º—É—î—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ–≥–æ —Ö–º–∞—Ä–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞.
–í—ñ–Ω –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –∂–æ–¥–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å --- –≤—Å—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞.
–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π](https://github.com/grammyjs/storages/tree/main/packages/free)!

–í—ñ–Ω –¥—É–∂–µ –ø—Ä–æ—Å—Ç–∏–π —É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ:

::: code-group

```ts [TypeScript]
import { freeStorage } from "@grammyjs/storage-free";

bot.use(session({
  initial: ...
  storage: freeStorage<SessionData>(bot.token),
}));
```

```js [JavaScript]
const { freeStorage } = require("@grammyjs/storage-free");

bot.use(session({
  initial: ...
  storage: freeStorage(bot.token),
}));
```

```ts [Deno]
import { freeStorage } from "https://deno.land/x/grammy_storages/free/src/mod.ts";

bot.use(session({
  initial: ...
  storage: freeStorage<SessionData>(bot.token),
}));
```

:::

–ì–æ—Ç–æ–≤–æ!
–¢–µ–ø–µ—Ä –≤–∞—à –±–æ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ –ø–æ—Å—Ç—ñ–π–Ω–µ —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö.

–û—Å—å –ø–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –±–æ—Ç–∞, —è–∫–∏–π –≤–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏, —â–æ–± —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏.

::: code-group

```ts [TypeScript]
import { Bot, Context, session, SessionFlavor } from "grammy";
import { freeStorage } from "@grammyjs/storage-free";

// –í–∏–∑–Ω–∞—á–∞—î–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–µ—Å—ñ—ó.
interface SessionData {
  count: number;
}
type MyContext = Context & SessionFlavor<SessionData>;

// –°—Ç–≤–æ—Ä—é—î–º–æ –±–æ—Ç–∞ —Ç–∞ —Ä–µ—î—Å—Ç—Ä—É—î–º–æ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ —Å–µ—Å—ñ—ó.
const bot = new Bot<MyContext>("");

bot.use(
  session({
    initial: () => ({ count: 0 }),
    storage: freeStorage(bot.token),
  }),
);

// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø–æ—Å—Ç—ñ–π–Ω—ñ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –≤ –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö –æ–Ω–æ–≤–ª–µ–Ω—å.
bot.on("message", async (ctx) => {
  ctx.session.count++;
  await ctx.reply(`–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: ${ctx.session.count}`);
});

bot.catch((err) => console.error(err));
bot.start();
```

```js [JavaScript]
const { Bot, session } = require("grammy");
const { freeStorage } = require("@grammyjs/storage-free");

// –°—Ç–≤–æ—Ä—é—î–º–æ –±–æ—Ç–∞ —Ç–∞ —Ä–µ—î—Å—Ç—Ä—É—î–º–æ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ —Å–µ—Å—ñ—ó.
const bot = new Bot("");

bot.use(
  session({
    initial: () => ({ count: 0 }),
    storage: freeStorage(bot.token),
  }),
);

// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø–æ—Å—Ç—ñ–π–Ω—ñ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –≤ –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö –æ–Ω–æ–≤–ª–µ–Ω—å.
bot.on("message", async (ctx) => {
  ctx.session.count++;
  await ctx.reply(`–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: ${ctx.session.count}`);
});

bot.catch((err) => console.error(err));
bot.start();
```

```ts [Deno]
import {
  Bot,
  Context,
  session,
  SessionFlavor,
} from "https://deno.land/x/grammy/mod.ts";
import { freeStorage } from "https://deno.land/x/grammy_storages/free/src/mod.ts";

// –í–∏–∑–Ω–∞—á–∞—î–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–µ—Å—ñ—ó.
interface SessionData {
  count: number;
}
type MyContext = Context & SessionFlavor<SessionData>;

// –°—Ç–≤–æ—Ä—é—î–º–æ –±–æ—Ç–∞ —Ç–∞ —Ä–µ—î—Å—Ç—Ä—É—î–º–æ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ —Å–µ—Å—ñ—ó.
const bot = new Bot<MyContext>("");

bot.use(
  session({
    initial: () => ({ count: 0 }),
    storage: freeStorage(bot.token),
  }),
);

// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø–æ—Å—Ç—ñ–π–Ω—ñ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –≤ –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö –æ–Ω–æ–≤–ª–µ–Ω—å.
bot.on("message", async (ctx) => {
  ctx.session.count++;
  await ctx.reply(`–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: ${ctx.session.count}`);
});

bot.catch((err) => console.error(err));
bot.start();
```

:::

### –†—ñ—à–µ–Ω–Ω—è –¥–ª—è –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å—Ö–æ–≤–∏—â

–ú–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—î–º–æ –∫–æ–ª–µ–∫—Ü—ñ—é –æ—Ñ—ñ—Ü—ñ–π–Ω–∏—Ö –∞–¥–∞–ø—Ç–µ—Ä—ñ–≤ —Å—Ö–æ–≤–∏—â, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞–Ω—ñ –≤–∞—à–∏—Ö —Å–µ—Å—ñ–π –≤ —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö.
–ö–æ–∂–µ–Ω –∑ –Ω–∏—Ö –≤–∏–º–∞–≥–∞—Ç–∏–º–µ –≤—ñ–¥ –≤–∞—Å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó —É —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∞–±–æ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è —Å—Ö–æ–≤–∏—â–∞.

–í—ñ–¥–≤—ñ–¥–∞–π—Ç–µ [—Ü–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π](https://github.com/grammyjs/storages/tree/main/packages#grammy-storages), —â–æ–± –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –Ω–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç –∞–¥–∞–ø—Ç–µ—Ä—ñ–≤ —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó —â–æ–¥–æ —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

::: tip –í–∞—à–µ —Å—Ö–æ–≤–∏—â–µ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è? –ù—ñ—á–æ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ!
–°—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –∞–¥–∞–ø—Ç–µ—Ä —Å—Ö–æ–≤–∏—â–∞ –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –ø—Ä–æ—Å—Ç–æ.
–û–ø—Ü—ñ—è `storage` –ø—Ä–∞—Ü—é—î –∑ –±—É–¥—å-—è–∫–∏–º –æ–± º—î–∫—Ç–æ–º, —è–∫–∏–π –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ —Ü—å–æ–≥–æ [—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É](/ref/core/storageadapter), —Ç–æ–º—É –≤–∏ –º–æ–∂–µ—Ç–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –≤–∞—à–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞ –ª–∏—à–µ –∫—ñ–ª—å–∫–æ–º–∞ —Ä—è–¥–∫–∞–º–∏ –∫–æ–¥—É.

> –Ø–∫—â–æ –≤–∏ –æ–ø—É–±–ª—ñ–∫—É–≤–∞–ª–∏ –≤–ª–∞—Å–Ω–∏–π –∞–¥–∞–ø—Ç–µ—Ä —Å—Ö–æ–≤–∏—â–∞, –Ω–µ —Å–æ—Ä–æ–º—Ç–µ—Å—è —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ü—é —Å—Ç–æ—Ä—ñ–Ω–∫—É —ñ —Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω—å–æ–≥–æ —Ç—É—Ç, —â–æ–± —ñ–Ω—à—ñ –ª—é–¥–∏ –º–æ–≥–ª–∏ –Ω–∏–º —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è.

:::

–í—Å—ñ –∞–¥–∞–ø—Ç–µ—Ä–∏ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –æ–¥–Ω–∞–∫–æ–≤–æ.
–ù–∞–π–ø–µ—Ä—à–µ –≤–∞–º —Å–ª—ñ–¥ –∑–≤–µ—Ä–Ω—É—Ç–∏ —É–≤–∞–≥—É –Ω–∞ –Ω–∞–∑–≤—É –ø–∞–∫–µ—Ç–∞ –æ–±—Ä–∞–Ω–æ–≥–æ –≤–∞–º–∏ –∞–¥–∞–ø—Ç–µ—Ä–∞.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∞–¥–∞–ø—Ç–µ—Ä —Å—Ö–æ–≤–∏—â–∞ –¥–ª—è Supabase –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è `supabase`.

**–£ Node.js** –≤–∏ –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∞–¥–∞–ø—Ç–µ—Ä–∏ —á–µ—Ä–µ–∑ `npm i @grammyjs/storage-<name>`.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∞–¥–∞–ø—Ç–µ—Ä —Å—Ö–æ–≤–∏—â–∞ –¥–ª—è Supabase –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `npm i @grammyjs/storage-supabase`.

**–£ Deno** –≤—Å—ñ –∞–¥–∞–ø—Ç–µ—Ä–∏ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø—É–±–ª—ñ–∫—É—é—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º—É –º–æ–¥—É–ª—ñ Deno.
–í–∏ –º–æ–∂–µ—Ç–µ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π –≤–∞–º –∞–¥–∞–ø—Ç–µ—Ä –∑ –π–æ–≥–æ –ø—ñ–¥—à–ª—è—Ö—É –∑–∞ –∞–¥—Ä–µ—Å–æ—é `https://deno.land/x/grammy_storages/<adapter>/src/mod.ts`.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∞–¥–∞–ø—Ç–µ—Ä —Å—Ö–æ–≤–∏—â–∞ –¥–ª—è Supabase –º–æ–∂–Ω–∞ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑ `https://deno.land/x/grammy_storages/supabase/src/mod.ts`.

–û–∑–Ω–∞–π–æ–º—Ç–µ—Å—è –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—è–º–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –æ–∫—Ä–µ–º–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞.
–í–æ–Ω–∏ –º—ñ—Å—Ç—è—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ç–µ, —è–∫ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ —ó—Ö –¥–æ –≤–∞—à–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ [–ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–∏ –≤–Ω–∏–∑](#—É–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è-–∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è-–¥–∞–Ω–∏—Ö), —â–æ–± –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏, —è–∫ –ø–ª–∞–≥—ñ–Ω —Å–µ—Å—ñ—ó –º–æ–∂–µ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –±—É–¥—å-—è–∫–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞ —Å—Ö–æ–≤–∏—â–∞.

## –î–µ–∫—ñ–ª—å–∫–∞ —Å–µ—Å—ñ–π

–ü–ª–∞–≥—ñ–Ω —Å–µ—Å—ñ—ó –º–æ–∂–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏ –¥–∞–Ω–∏—Ö –≤–∞—à–æ—ó —Å–µ—Å—ñ—ó –≤ —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö.
–ü–æ —Å—É—Ç—ñ, —Ü–µ –ø—Ä–∞—Ü—é—î —Ç–∞–∫, –Ω—ñ–±–∏ –≤–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç–µ –¥–µ–∫—ñ–ª—å–∫–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤ –ø–ª–∞–≥—ñ–Ω–∞ —Å–µ—Å—ñ—ó, –∫–æ–∂–µ–Ω –∑ —è–∫–∏—Ö –º–∞—î –≤–ª–∞—Å–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é.

–ö–æ–∂–µ–Ω –∑ —Ü–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤ –¥–∞–Ω–∏—Ö –º–∞—Ç–∏–º–µ —ñ–º º—è, –ø—ñ–¥ —è–∫–∏–º –≤–æ–Ω–∏ –∑–º–æ–∂—É—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å–≤–æ—ó –¥–∞–Ω—ñ.
–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–∏ –∑–º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ `ctx.session.foo` —Ç–∞ `ctx.session.bar`, –∞ —Ü—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –±—É–ª–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –∑ —Ä—ñ–∑–Ω–∏—Ö —Å—Ö–æ–≤–∏—â –¥–∞–Ω–∏—Ö, —ñ –≤–æ–Ω–∏ —Ç–∞–∫–æ–∂ –±—É–¥—É—Ç—å –∑–∞–ø–∏—Å–∞–Ω—ñ –Ω–∞–∑–∞–¥ –≤ —Ä—ñ–∑–Ω—ñ —Å—Ö–æ–≤–∏—â–∞ –¥–∞–Ω–∏—Ö.
–ó–≤–∏—á–∞–π–Ω–æ, –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–¥–Ω–µ —ñ —Ç–µ –∂ —Å—Ö–æ–≤–∏—â–µ –∑ —Ä—ñ–∑–Ω–æ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é.

–¢–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ [–∫–ª—é—á—ñ —Å–µ—Å—ñ—ó](#–∫–ª—é—á—ñ-—Å–µ—Å—ñ—ñ) –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞.
–û—Ç–∂–µ, –≤–∏ –º–æ–∂–µ—Ç–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —á–∞—Å—Ç–∏–Ω—É –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É, –∞ —á–∞—Å—Ç–∏–Ω—É --- –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

> –Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ [–ø–ª–∞–≥—ñ–Ω –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—ñ (runner)](./runner), –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–ª–∏ `sequentialize`, –ø–æ–≤–µ—Ä–Ω—É–≤—à–∏ –∑ —Ñ—É–Ω–∫—Ü—ñ—ó **–≤—Å—ñ** –∫–ª—é—á—ñ —Å–µ—Å—ñ—ó —è–∫ –æ–±–º–µ–∂–µ–Ω–Ω—è.

–í–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è —Ü—ñ—î—é –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é, –ø–µ—Ä–µ–¥–∞–≤—à–∏ `type: "multi"` –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Å–µ—Å—ñ—ó.
–£ —Å–≤–æ—é —á–µ—Ä–≥—É, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∫–æ–∂–µ–Ω —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —ó—Ö –≤–ª–∞—Å–Ω–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

```ts
bot.use(
  session({
    type: "multi",
    foo: {
      // —Ü–µ —Ç–∞–∫–æ–∂ —Ç–∏–ø–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è
      storage: new MemorySessionStorage(),
      initial: () => undefined,
      getSessionKey: (ctx) => ctx.chat?.id.toString(),
    },
    bar: {
      initial: () => ({ prop: 0 }),
      storage: freeStorage(bot.token),
    },
    baz: {},
  }),
);
```

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –¥–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞, —è–∫–∏–π –≤–∏ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.
–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∫–∞–∑–∞—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–π –æ–± º—î–∫—Ç, —è–∫ –º–∏ —Ä–æ–±–∏–º–æ —Ü–µ –¥–ª—è `baz` —É –Ω–∞–≤–µ–¥–µ–Ω–æ–º—É –≤–∏—â–µ –ø—Ä–∏–∫–ª–∞–¥—ñ.

–î–∞–Ω—ñ –≤–∞—à–æ—ó —Å–µ—Å—ñ—ó –≤—Å–µ –æ–¥–Ω–æ –±—É–¥—É—Ç—å —Å–∫–ª–∞–¥–∞—Ç–∏—Å—è –∑ –æ–± º—î–∫—Ç–∞ –∑ –¥–µ–∫—ñ–ª—å–∫–æ–º–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏.
–û—Å—å —á–æ–º—É –≤–∞—à —Ä–æ–∑—à–∏—Ä—é–≤–∞—á –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è.
–£ –Ω–∞–≤–µ–¥–µ–Ω–æ–º—É –≤–∏—â–µ –ø—Ä–∏–∫–ª–∞–¥—ñ –æ—Å—å —Ç–∞–∫–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ–± º—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É:

```ts
interface SessionData {
  foo?: string;
  bar: { prop: number };
  baz: { width?: number; height?: number };
}
```

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `SessionFlavor<SessionData>` –¥–ª—è –≤–∞—à–æ–≥–æ –æ–± º—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.

## –õ—ñ–Ω–∏–≤—ñ —Å–µ—Å—ñ—ó

> –£ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –æ–ø–∏—Å–∞–Ω–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –ø—Ä–æ —è–∫—É –±—ñ–ª—å—à–æ—Å—Ç—ñ –ª—é–¥–µ–π –Ω–µ –≤–∞—Ä—Ç–æ —Ç—É—Ä–±—É–≤–∞—Ç–∏—Å—è.

–õ—ñ–Ω–∏–≤—ñ —Å–µ—Å—ñ—ó --- —Ü–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–µ—Å—ñ–π, —è–∫–∞ –º–æ–∂–µ –∑–Ω–∞—á–Ω–æ –∑–º–µ–Ω—à–∏—Ç–∏ —Ç—Ä–∞—Ñ—ñ–∫ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –≤–∞—à–æ–≥–æ –±–æ—Ç–∞, –ø—Ä–æ–ø—É—Å–∫–∞—é—á–∏ –∑–∞–π–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó —á–∏—Ç–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø–∏—Å—É.

–ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, –≤–∞—à –±–æ—Ç –ø–µ—Ä–µ–±—É–≤–∞—î –≤ –≥—Ä—É–ø–æ–≤–æ–º—É —á–∞—Ç—ñ, –¥–µ –≤—ñ–Ω –Ω–µ —Ä–µ–∞–≥—É—î –Ω–∞ –∑–≤–∏—á–∞–π–Ω—ñ —Ç–µ–∫—Å—Ç–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∞ –ª–∏—à–µ –Ω–∞ –∫–æ–º–∞–Ω–¥–∏.
–ë–µ–∑ —Å–µ—Å—ñ–π —Å—Ç–∞–Ω–µ—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω–µ:

1. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –Ω–æ–≤–∏–º —Ç–µ–∫—Å—Ç–æ–≤–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –≤–∞—à–æ–º—É –±–æ—Ç—É.
2. –û–±—Ä–æ–±–Ω–∏–∫ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è, —Ç–æ–º—É –Ω—ñ—è–∫–∏—Ö –¥—ñ–π –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è.
3. –ü—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –∑–∞–≤–µ—Ä—à—É—î —Ä–æ–±–æ—Ç—É –Ω–µ–≥–∞–π–Ω–æ.

–©–æ–π–Ω–æ –≤–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —Å—Ç—Ä–æ–≥—ñ —Å–µ—Å—ñ—ó, —è–∫—ñ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –Ω–∞–¥–∞—é—Ç—å –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –æ–± º—î–∫—Ç—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω–µ:

1. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –Ω–æ–≤–∏–º —Ç–µ–∫—Å—Ç–æ–≤–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –≤–∞—à–æ–º—É –±–æ—Ç—É.
2. –î–∞–Ω—ñ —Å–µ—Å—ñ—ó –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑—ñ —Å—Ö–æ–≤–∏—â–∞ —Å–µ—Å—ñ—ó: –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.
3. –û–±—Ä–æ–±–Ω–∏–∫ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è, —Ç–æ–º—É –Ω—ñ—è–∫–∏—Ö –¥—ñ–π –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è.
4. –Ü–¥–µ–Ω—Ç–∏—á–Ω—ñ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –Ω–∞–∑–∞–¥ –¥–æ —Å—Ö–æ–≤–∏—â–∞ —Å–µ—Å—ñ—ó.
5. –ü—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –∑–∞–≤–µ—Ä—à—É—î —Ä–æ–±–æ—Ç—É, –≤–∏–∫–æ–Ω–∞–≤—à–∏ —á–∏—Ç–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø–∏—Å –¥–æ —Å—Ö–æ–≤–∏—â–∞ –¥–∞–Ω–∏—Ö.

–ó–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –≤–∞—à–æ–≥–æ –±–æ—Ç–∞, —Ü–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –≤–µ–ª–∏–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–π–≤–∏—Ö –∑—á–∏—Ç—É–≤–∞–Ω—å —ñ –∑–∞–ø–∏—Å—ñ–≤.
–õ—ñ–Ω–∏–≤—ñ —Å–µ—Å—ñ—ó –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ 2-–π —Ç–∞ 4-–π –∫—Ä–æ–∫, —è–∫—â–æ –≤–∏—è–≤–∏—Ç—å—Å—è, —â–æ –∂–æ–¥–Ω–æ–º—É –≤–∏–∫–ª–∏–∫–∞–Ω–æ–º—É –æ–±—Ä–æ–±–Ω–∏–∫—É –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó.
–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –¥–∞–Ω—ñ –Ω–µ –±—É–¥—É—Ç—å –Ω—ñ –∑—á–∏—Ç—É–≤–∞—Ç–∏—Å—è –∑—ñ —Å—Ö–æ–≤–∏—â–∞ –¥–∞–Ω–∏—Ö, –Ω—ñ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏—Å—è –¥–æ –Ω—å–æ–≥–æ.

–¶–µ –¥–æ—Å—è–≥–∞—î—Ç—å—Å—è —à–ª—è—Ö–æ–º –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ `ctx.session`.
–Ø–∫—â–æ –Ω–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ –∂–æ–¥–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞, —Ç–æ –¥–æ—Å—Ç—É–ø –¥–æ `ctx.session` –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±—É–¥–µ –æ—Ç—Ä–∏–º–∞–Ω–æ.
–õ—ñ–Ω–∏–≤—ñ —Å–µ—Å—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ü–µ —è–∫ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∑–≤ º—è–∑–∫—É –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

–ù–∞ –ø—Ä–∞–∫—Ç–∏—Ü—ñ, –∑–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –º–∞—Ç–∏ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó —É `ctx.session`, –≤–∏ —Ç–µ–ø–µ—Ä –º–∞—Ç–∏–º–µ—Ç–µ _–¥–∞–Ω—ñ —Å–µ—Å—ñ—ó, –æ–≥–æ—Ä–Ω—É—Ç—ñ –≤ `Promise`_, —É `ctx.session`.

```ts
// –ó–≤–∏—á–∞–π–Ω—ñ —Å—Ç—Ä–æ–≥—ñ —Å–µ—Å—ñ—ó
bot.command("settings", async (ctx) => {
  // `session` ‚Äî —Ü–µ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó
  const session = ctx.session;
});

// –õ—ñ–Ω–∏–≤—ñ —Å–µ—Å—ñ—ó
bot.command("settings", async (ctx) => {
  // `promise` ‚Äî —Ü–µ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó, –æ–≥–æ—Ä–Ω—É—Ç—ñ –≤ `Promise`
  const promise = ctx.session;
  // `session` ‚Äî —Ü–µ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó
  const session = await ctx.session;
});
```

–Ø–∫—â–æ –≤–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–≤–µ—Ä—Ç–∞–ª–∏—Å—è –¥–æ `ctx.session`, –Ω—ñ—è–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π –Ω–µ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ, –∞–ª–µ —â–æ–π–Ω–æ –≤–∏ –∑–≤–µ—Ä–Ω–µ—Ç–µ—Å—è –¥–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ `session` –æ–± º—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ –æ–ø–µ—Ä–∞—Ü—ñ—é —á–∏—Ç–∞–Ω–Ω—è.
–Ø–∫—â–æ –≤–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ —ñ–Ω—ñ—Ü—ñ—é—î—Ç–µ —á–∏—Ç–∞–Ω–Ω—è –∞–±–æ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –Ω–µ –ø—Ä–∏—Å–≤–æ—ó—Ç–µ –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è `ctx.session`, –ø–ª–∞–≥—ñ–Ω —Å–µ—Å—ñ—ó –∑–Ω–∞—Ç–∏–º–µ, —â–æ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –Ω–∞–∑–∞–¥ —Ç–∞–∫–æ–∂ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ, —Ç–æ–º—É —â–æ –≤–æ–Ω–∏ –Ω–µ –º–æ–≥–ª–∏ –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω—ñ.
–û—Ç–∂–µ, –æ–ø–µ—Ä–∞—Ü—ñ—é –∑–∞–ø–∏—Å—É —Ç–∞–∫–æ–∂ –Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–∞.
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –º–∏ –¥–æ—Å—è–≥–∞—î–º–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ–π —á–∏—Ç–∞–Ω–Ω—è —ñ –∑–∞–ø–∏—Å—É, –∞–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–µ—Å—ñ—é –º–∞–π–∂–µ —Ç–∞–∫ —Å–∞–º–æ, —è–∫ —ñ —Ä–∞–Ω—ñ—à–µ, –ª–∏—à–µ –∑ –∫—ñ–ª—å–∫–æ–º–∞ –∫–ª—é—á–æ–≤–∏–º–∏ —Å–ª–æ–≤–∞–º–∏: `async` —ñ `await`, –¥–æ–¥–∞–Ω–∏–º–∏ –¥–æ –≤–∞—à–æ–≥–æ –∫–æ–¥—É.

–¢–æ–∂ —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª—ñ–Ω–∏–≤—ñ —Å–µ—Å—ñ—ó –∑–∞–º—ñ—Å—Ç—å –∑–≤–∏—á–∞–π–Ω–∏—Ö —Å—Ç—Ä–æ–≥–∏—Ö?
–ó–∞–≥–∞–ª–æ–º –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ —Ç—Ä–∏ –¥—ñ—ó:

1. –ó–∞–º—ñ—Å—Ç—å `SessionFlavor` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `LazySessionFlavor` —É –≤–∞—à–æ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ.
   –í–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–æ, –ø—Ä–æ—Å—Ç–æ `ctx.session` –∑–∞–≥–æ—Ä–Ω—É—Ç–æ –≤ `Promise` –¥–ª—è –ª—ñ–Ω–∏–≤–æ–≥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—É.
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `lazySession` –∑–∞–º—ñ—Å—Ç—å `session` –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –≤–∞—à–æ–≥–æ –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ —Å–µ—Å—ñ—ó.
3. –ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `await ctx.session` –∑–∞–º—ñ—Å—Ç—å `ctx.session` —Å–∫—Ä—ñ–∑—å —É –≤–∞—à–∏—Ö –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö —è–∫ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è, —Ç–∞–∫ —ñ –¥–ª—è –∑–∞–ø–∏—Å—É.
   –ù–µ —Ö–≤–∏–ª—é–π—Ç–µ—Å—è: –≤–∏ –º–æ–∂–µ—Ç–µ –æ—á—ñ–∫—É–≤–∞—Ç–∏ (`await`) `Promise` –∑ –¥–∞–Ω–∏–º–∏ –≤–∞—à–æ—ó —Å–µ—Å—ñ—ó —Å–∫—ñ–ª—å–∫–∏ –∑–∞–≤–≥–æ–¥–Ω–æ —Ä–∞–∑—ñ–≤, –∞–ª–µ –≤–∏ –∑–∞–≤–∂–¥–∏ –±—É–¥–µ—Ç–µ –ø–æ—Å–∏–ª–∞—Ç–∏—Å—è –Ω–∞ –æ–¥–Ω–µ —ñ —Ç–µ –∂ –∑–Ω–∞—á–µ–Ω–Ω—è, —Ç–æ–º—É –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±—É–¥–µ –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —á–∏—Ç–∞–Ω—å –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ —É –ª—ñ–Ω–∏–≤–∏—Ö —Å–µ—Å—ñ—è—Ö –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–∏–∑–Ω–∞—á–∞—Ç–∏ `ctx.session` —è–∫ –æ–± º—î–∫—Ç–∏, —Ç–∞–∫ –π –æ–±—ñ—Ü—è–Ω–∫–∏ –æ–± º—î–∫—Ç—ñ–≤.
–Ø–∫—â–æ –≤–∏ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `ctx.session` —è–∫ `Promise`, –≤–æ–Ω–∞ –±—É–¥–µ –æ—á—ñ–∫—É–≤–∞—Ç–∏ (`await`) –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å–æ–º –¥–∞–Ω–∏—Ö –Ω–∞–∑–∞–¥ –¥–æ —Å—Ö–æ–≤–∏—â–∞ –¥–∞–Ω–∏—Ö.
–¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥:

```ts
bot.command("reset", async (ctx) => {
  // –ù–∞–±–∞–≥–∞—Ç–æ –∫–æ—Ä–æ—Ç—à–µ, –Ω—ñ–∂ —Å–ø–æ—á–∞—Ç–∫—É `await ctx.session`:
  ctx.session = ctx.session.then((stats) => {
    stats.counter = 0;
  });
});
```

–ú–æ–∂–Ω–∞ –¥–æ–±—Ä—è—á–µ –ø–æ—Å–ø–µ—Ä–µ—á–∞—Ç–∏—Å—è, —â–æ —è–≤–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `await` —î –∫—Ä–∞—â–∏–º –∑–∞ –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—è `ctx.session` –∑–Ω–∞—á–µ–Ω–Ω—è `Promise`, –∞–ª–µ —Å–ø—Ä–∞–≤–∞ –≤ —Ç–æ–º—É, —â–æ –≤–∏ _–º–æ–∂–µ—Ç–µ_ —Ü–µ –∑—Ä–æ–±–∏—Ç–∏, —è–∫—â–æ –≤–∞–º –∑ —è–∫–∏—Ö–æ—Å—å –ø—Ä–∏—á–∏–Ω –±—ñ–ª—å—à–µ –ø–æ–¥–æ–±–∞—î—Ç—å—Å—è —Ç–∞–∫–∏–π —Å—Ç–∏–ª—å.

::: tip –ü–ª–∞–≥—ñ–Ω–∏, —è–∫—ñ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Å–µ—Å—ñ—ó
–†–æ–∑—Ä–æ–±–Ω–∏–∫–∏ –ø–ª–∞–≥—ñ–Ω—ñ–≤, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `ctx.session`, –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞–≤–∂–¥–∏ –¥–æ–∑–≤–æ–ª—è—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ `SessionFlavor | LazySessionFlavor` --- –æ—Ç–∂–µ, –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –æ–±–∏–¥–≤–∞ —Ä–µ–∂–∏–º–∏.
–£ –∫–æ–¥—ñ –ø–ª–∞–≥—ñ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ—Å—Ç—ñ–π–Ω–æ –æ—á—ñ–∫—É–π—Ç–µ –Ω–∞ `ctx.session`: —è–∫—â–æ –±—É–¥–µ –ø–µ—Ä–µ–¥–∞–Ω–æ –æ–± º—î–∫—Ç, —è–∫–∏–π –Ω–µ —î `Promise`, –±—É–¥–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–æ —Ç–æ–π —Å–∞–º–∏–π –æ–± º—î–∫—Ç; –æ—Ç–∂–µ, –≤–∏ —Ñ–∞–∫—Ç–∏—á–Ω–æ –ø–∏—à–µ—Ç–µ –∫–æ–¥ –ª–∏—à–µ –¥–ª—è –ª—ñ–Ω–∏–≤–∏—Ö —Å–µ—Å—ñ–π, –ø—Ä–æ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç–µ —Å—Ç—Ä–æ–≥—ñ —Å–µ—Å—ñ—ó.
:::

## –£–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

–ü–ª–∞–≥—ñ–Ω —Å–µ—Å—ñ—ó –∑–¥–∞—Ç–µ–Ω –ø–æ–∫—Ä–∞—â–∏—Ç–∏ –±—É–¥—å-—è–∫–∏–π –∞–¥–∞–ø—Ç–µ—Ä —Å—Ö–æ–≤–∏—â–∞, –¥–æ–¥–∞–≤—à–∏ –π–æ–º—É –±—ñ–ª—å—à–µ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π: [—Ç–∞–π–º-–∞—É—Ç–∏](#—Ç–∞–∏–º-–∞—É—Ç–∏) —Ç–∞ [–º—ñ–≥—Ä–∞—Ü—ñ—ó](#–º—ñ–≥—Ä–∞—Ü—ñ—ñ).

–á—Ö –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ñ—É–Ω–∫—Ü—ñ—ó `enhanceStorage`.

```ts
// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≤–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–∏–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.
bot.use(
  session({
    storage: enhanceStorage({
      storage: freeStorage(bot.token), // –Ω–∞–ª–∞—à—Ç—É—î–º–æ —Ü–µ
      // —ñ–Ω—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
    }),
  }),
);
```

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–±–∏–¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

### –¢–∞–π–º-–∞—É—Ç–∏

–£–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ç–∞–π–º-–∞—É—Ç—ñ–≤ –¥–æ–¥–∞—î –¥–∞—Ç—É –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ç–µ—Ä–º—ñ–Ω—É –¥—ñ—ó –¥–æ –¥–∞–Ω–∏—Ö —Å–µ—Å—ñ—ó.
–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∫–∞–∑–∞—Ç–∏ –ø–µ—Ä—ñ–æ–¥ —á–∞—Å—É, –ø—ñ—Å–ª—è —è–∫–æ–≥–æ –¥–∞–Ω—ñ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∞—Ç—É –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ, —è–∫—â–æ –ø—Ä–æ—Ç—è–≥–æ–º —Ü—å–æ–≥–æ —á–∞—Å—É —Å–µ—Å—ñ—é –Ω–µ –±—É–¥–µ –∑–º—ñ–Ω–µ–Ω–æ.

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç–∞–π–º-–∞—É—Ç–∏ —Å–µ—Å—ñ—ó –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –æ–ø—Ü—ñ—ó `millisecondsToLive`.

```ts
const enhanced = enhanceStorage({
  storage,
  millisecondsToLive: 30 * 60 * 1000, // 30 —Ö–≤
});
```

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ —Ñ–∞–∫—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è –ª–∏—à–µ –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –∑—á–∏—Ç—É–≤–∞–Ω–Ω—ñ –¥–∞–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—ó —Å–µ—Å—ñ—ó.

### –ú—ñ–≥—Ä–∞—Ü—ñ—ó

–ú—ñ–≥—Ä–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å–Ω—ñ, —è–∫—â–æ –≤–∏ –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç–µ —Ä–æ–∑—Ä–æ–±–ª—è—Ç–∏ –±–æ—Ç–∞, –∞ –¥–∞–Ω—ñ –ø—Ä–æ —Å–µ—Å—ñ—ó –≤–∂–µ —ñ—Å–Ω—É—é—Ç—å.
–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—Ö, —è–∫—â–æ —Ö–æ—á–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó, –Ω–µ –ø–æ—Ä—É—à—É—é—á–∏ –≤—Å—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –¥–∞–Ω—ñ.

–î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∏—Å–≤–æ—ó—Ç–∏ –¥–∞–Ω–∏–º –Ω–æ–º–µ—Ä–∏ –≤–µ—Ä—Å—ñ–π, –∞ –ø–æ—Ç—ñ–º –Ω–∞–ø–∏—Å–∞—Ç–∏ –Ω–µ–≤–µ–ª–∏–∫—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó.
–§—É–Ω–∫—Ü—ñ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤–∏–∑–Ω–∞—á–∞—é—Ç—å, —è–∫ –æ–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –∑ –æ–¥–Ω—ñ—î—ó –≤–µ—Ä—Å—ñ—ó –¥–æ —ñ–Ω—à–æ—ó.

–ú–∏ —Å–ø—Ä–æ–±—É—î–º–æ –ø—Ä–æ—ñ–ª—é—Å—Ç—Ä—É–≤–∞—Ç–∏ —Ü–µ –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ.
–ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, –≤–∏ –∑–±–µ—Ä—ñ–≥–∞–ª–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –¥–æ–º–∞—à–Ω—ñ—Ö —Ç–≤–∞—Ä–∏–Ω–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
–î–æ—Å—ñ –≤–∏ –∑–±–µ—Ä—ñ–≥–∞–ª–∏ –ª–∏—à–µ —ñ–º–µ–Ω–∞ —Ç–≤–∞—Ä–∏–Ω–æ–∫ —É –º–∞—Å–∏–≤—ñ —Ä—è–¥–∫—ñ–≤ —É `ctx.session.petNames`.

```ts
interface SessionData {
  petNames: string[];
}
```

–¢–µ–ø–µ—Ä –≤–∏ —Ä–æ–∑—É–º—ñ—î—Ç–µ, —â–æ —Ç–∞–∫–æ–∂ —Ö–æ—á–µ—Ç–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤—ñ–∫ —Ç–≤–∞—Ä–∏–Ω–æ–∫.

–í–∏ –º–æ–∂–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–µ:

```ts
interface SessionData {
  petNames: string[];
  petBirthdays?: number[];
}
```

–¶–µ –Ω–µ –ø–æ—Ä—É—à–∏—Ç—å —ñ—Å–Ω—É—é—á—ñ –¥–∞–Ω—ñ –≤–∞—à–æ—ó —Å–µ—Å—ñ—ó.
–û–¥–Ω–∞–∫ —Ü–µ –Ω–µ —Ç–∞–∫ –≤–∂–µ –π –¥–æ–±—Ä–µ, —Ç–æ–º—É —â–æ —ñ–º–µ–Ω–∞ —Ç–∞ –¥–Ω—ñ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è —Ç–µ–ø–µ—Ä –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö.
–í —ñ–¥–µ–∞–ª—ñ, –≤–∞—à—ñ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –ø–æ–≤–∏–Ω–Ω—ñ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫:

```ts
interface Pet {
  name: string;
  birthday?: number;
}

interface SessionData {
  pets: Pet[];
}
```

–§—É–Ω–∫—Ü—ñ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç–∞—Ä–∏–π –º–∞—Å–∏–≤ —Ä—è–¥–∫—ñ–≤ —É –Ω–æ–≤–∏–π –º–∞—Å–∏–≤ –æ–± º—î–∫—Ç—ñ–≤ –¥–æ–º–∞—à–Ω—ñ—Ö —Ç–≤–∞—Ä–∏–Ω–æ–∫.

::: code-group

```ts [TypeScript]
interface OldSessionData {
  petNames: string[];
}

function addBirthdayToPets(old: OldSessionData): SessionData {
  return {
    pets: old.petNames.map((name) => ({ name })),
  };
}

const enhanced = enhanceStorage({
  storage,
  migrations: {
    1: addBirthdayToPets,
  },
});
```

```js [JavaScript]
function addBirthdayToPets(old) {
  return {
    pets: old.petNames.map((name) => ({ name })),
  };
}

const enhanced = enhanceStorage({
  storage,
  migrations: {
    1: addBirthdayToPets,
  },
});
```

:::

–©–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –∑—á–∏—Ç—É—é—Ç—å—Å—è –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó, —Ñ—É–Ω–∫—Ü—ñ—è –≤–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è —Å—Ö–æ–≤–∏—â–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –≤–∂–µ –º–∞—é—Ç—å –≤–µ—Ä—Å—ñ—é `1`.
–Ø–∫—â–æ –≤–µ—Ä—Å—ñ—è –Ω–∏–∂—á–∞ –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—è —á–µ—Ä–µ–∑ —Ç–µ, —â–æ –≤–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∏ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é —Ä–∞–Ω—ñ—à–µ, –±—É–¥–µ –∑–∞–ø—É—â–µ–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é –º—ñ–≥—Ä–∞—Ü—ñ—ó.
–í–æ–Ω–∞ –æ–Ω–æ–≤–∏—Ç—å –¥–∞–Ω—ñ –¥–æ –≤–µ—Ä—Å—ñ—ó `1`.
–û—Ç–∂–µ, —É –≤–∞—à–æ–º—É –±–æ—Ç—ñ –≤–∏ –∑–∞–≤–∂–¥–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–ø—É—Å—Ç–∏—Ç–∏, —â–æ –¥–∞–Ω—ñ –≤–∞—à–∏—Ö —Å–µ—Å—ñ–π –º–∞—é—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∞ —Ñ—É–Ω–∫—Ü—ñ—è –≤–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è —Å—Ö–æ–≤–∏—â–∞ –ø–æ–¥–±–∞—î –ø—Ä–æ —Ä–µ—à—Ç—É —ñ –º—ñ–≥—Ä—É—î –≤–∞—à—ñ –¥–∞–Ω—ñ –∑–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ.

–ó —á–∞—Å–æ–º, –∫–æ–ª–∏ –≤–∞—à –±–æ—Ç –±—É–¥–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è, –≤–∏ –∑–º–æ–∂–µ—Ç–µ –¥–æ–¥–∞–≤–∞—Ç–∏ –≤—Å–µ –±—ñ–ª—å—à–µ —ñ –±—ñ–ª—å—à–µ —Ñ—É–Ω–∫—Ü—ñ–π –º—ñ–≥—Ä–∞—Ü—ñ—ó:

```ts
const enhanced = enhanceStorage({
  storage,
  migrations: {
    1: addBirthdayToPets,
    2: addIsFavoriteFlagToPets,
    3: addUserSettings,
    10: extendUserSettings,
    10.1: fixUserSettings,
    11: compressData,
  },
});
```

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–±—Ä–∞—Ç–∏ –±—É–¥—å-—è–∫—ñ —á–∏—Å–ª–∞, —è–∫—ñ —î –≤ JavaScript, —è–∫ –≤–µ—Ä—Å—ñ—ó.
–ù–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –¥–∞–ª–µ–∫–æ —Ä–æ–∑–≤–∏–Ω—É–ª–∏—Å—è –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó —á–∞—Ç—É, —â–æ–π–Ω–æ –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω—ñ, —ó—Ö –±—É–¥–µ –º—ñ–≥—Ä—É–≤–∞–Ω–æ –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏, –¥–æ–∫–∏ –≤–æ–Ω–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º—É—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

### –¢–∏–ø–∏ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω—å —Å—Ö–æ–≤–∏—â–∞

–ö–æ–ª–∏ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Å—Ö–æ–≤–∏—â–∞, –≤–∞—à –∞–¥–∞–ø—Ç–µ—Ä –ø–æ–≤–∏–Ω–µ–Ω –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –±—ñ–ª—å—à–µ –¥–∞–Ω–∏—Ö, –Ω—ñ–∂ –ø—Ä–æ—Å—Ç–æ –¥–∞–Ω—ñ –≤–∞—à–æ—ó —Å–µ—Å—ñ—ó.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤—ñ–Ω –ø–æ–≤–∏–Ω–µ–Ω –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —á–∞—Å, –∫–æ–ª–∏ —Å–µ—Å—ñ—é –±—É–ª–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤–æ—Å—Ç–∞–Ω–Ω—î, —â–æ–± –∫–æ—Ä–µ–∫—Ç–Ω–æ [–≤–∏–¥–∞–ª–∏—Ç–∏](#—Ç–∞–∏–º-–∞—É—Ç–∏) –¥–∞–Ω—ñ –ø–æ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—é —Ç–∞–π–º-–∞—É—Ç—É.
–£ –¥–µ—è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö TypeScript –∑–º–æ–∂–µ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–ª—è –≤–∞—à–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞ —Å—Ö–æ–≤–∏—â–∞.
–û–¥–Ω–∞–∫, —á–∞—Å—Ç—ñ—à–µ –∑–∞ –≤—Å–µ, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —è–≤–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö —Å–µ—Å—ñ—ó –≤ –¥–µ–∫—ñ–ª—å–∫–æ—Ö –º—ñ—Å—Ü—è—Ö.

–ù–∞—Å—Ç—É–ø–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É —ñ–ª—é—Å—Ç—Ä—É—î, —è–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–∞–π–º-–∞—É—Ç—É –∑ –∫–æ—Ä–µ–∫—Ç–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏ TypeScript.

```ts
interface SessionData {
  count: number;
}

type MyContext = Context & SessionFlavor<SessionData>;

const bot = new Bot<MyContext>("");

bot.use(
  session({
    initial(): SessionData {
      return { count: 0 };
    },
    storage: enhanceStorage({
      storage: new MemorySessionStorage<Enhance<SessionData>>(),
      millisecondsToLive: 60_000,
    }),
  }),
);

bot.on("message", (ctx) => ctx.reply(`–ö—ñ–ª—å–∫—ñ—Å—Ç—å —á–∞—Ç—ñ–≤ ${ctx.session.count++}`));

bot.start();
```

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ –∫–æ–∂–µ–Ω [–∞–¥–∞–ø—Ç–µ—Ä —Å—Ö–æ–≤–∏—â–∞](#–≤—ñ–¥–æ–º—ñ-–∞–¥–∞–ø—Ç–µ—Ä–∏-—Å—Ö–æ–≤–∏—â) –º–æ–∂–µ –ø—Ä–∏–π–º–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–∏–ø—É.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è [–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏—Ö —Å–µ—Å—ñ–π](#–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–µ-—Å—Ö–æ–≤–∏—â–µ) –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `freeStorage<Enhance<SessionData>>` –∑–∞–º—ñ—Å—Ç—å `MemorySessionStorage<Enhance<SessionData>>`.
–¢–µ —Å–∞–º–µ —Å—Ç–æ—Å—É—î—Ç—å—Å—è —ñ –≤—Å—ñ—Ö —ñ–Ω—à–∏—Ö –∞–¥–∞–ø—Ç–µ—Ä—ñ–≤ —Å—Ö–æ–≤–∏—â.

## –ó–∞–≥–∞–ª—å–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ –ø—Ä–æ –ø–ª–∞–≥—ñ–Ω

–¶–µ–π –ø–ª–∞–≥—ñ–Ω –≤–±—É–¥–æ–≤–∞–Ω–æ –≤ —è–¥—Ä–æ grammY.
–í–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω—ñ—á–æ–≥–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ.
–ü—Ä–æ—Å—Ç–æ —ñ–º–ø–æ—Ä—Ç—É–π—Ç–µ –≤—Å–µ –∑ —Å–∞–º–æ–≥–æ grammY.

–î–æ —Ç–æ–≥–æ –∂ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —ñ –¥–æ–≤—ñ–¥–∫–∞ API —Ü—å–æ–≥–æ –ø–ª–∞–≥—ñ–Ω–∞ —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –∑ —è–¥—Ä–æ–º –ø–∞–∫–µ—Ç–∞.
