# –ö–æ–Ω—Ç–µ–∫—Å—Ç

–û–± º—î–∫—Ç `Context` ([–¥–æ–≤—ñ–¥–Ω–∏–∫ API grammY](/ref/core/context)) —î –≤–∞–∂–ª–∏–≤–æ—é —á–∞—Å—Ç–∏–Ω–æ—é grammY.

–ö–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, –∫–æ–ª–∏ –≤–∏ —Ä–µ—î—Å—Ç—Ä—É—î—Ç–µ –æ–±—Ä–æ–±–Ω–∏–∫–∞ –Ω–∞ —Å–≤–æ—î–º—É –æ–± º—î–∫—Ç—ñ –±–æ—Ç–∞, —Ü–µ–π –æ–±—Ä–æ–±–Ω–∏–∫ –æ—Ç—Ä–∏–º—É—î –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.

```ts
bot.on("message", async (ctx) => {
  // `ctx` ‚Äî —Ü–µ –æ–± º—î–∫—Ç `Context`.
});
```

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, —â–æ–±

- [–æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è](#–¥–æ—Å—Ç—É–ø–Ω–∞-—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è),
- [–≤–∏–∫–æ–Ω–∞—Ç–∏ –¥—ñ—ó —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è](#–¥–æ—Å—Ç—É–ø–Ω—ñ-–¥—ñ—ñ).

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ –æ–± º—î–∫—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–∞–∑–≤–∏—á–∞–π –Ω–∞–∑–∏–≤–∞—é—Ç—å `ctx`.

## –î–æ—Å—Ç—É–ø–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∞—à–æ–º—É –±–æ—Ç—É, –≤–∏ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Ü—å–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `ctx.message`.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –≤–∏ –º–æ–∂–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–µ:

```ts
bot.on("message", async (ctx) => {
  // –ü—ñ–¥ —á–∞—Å –æ–±—Ä–æ–±–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å `txt` –±—É–¥–µ —Ç–∏–ø—É `string`.
  // –¢–∞–∫–æ–∂ –º–æ–∂–µ –±—É—Ç–∏ `undefined`, —è–∫—â–æ –æ—Ç—Ä–∏–º–∞–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –º—ñ—Å—Ç–∏—Ç—å —Ç–µ–∫—Å—Ç.
  // –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—ó, –Ω–∞–ª—ñ–ø–∫–∏ —Ç–æ—â–æ.
  const txt = ctx.message.text;
});
```

–¢–∞–∫ —Å–∞–º–æ –≤–∏ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —ñ–Ω—à–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π –æ–± º—î–∫—Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: `ctx.message.chat` –¥–ª—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —á–∞—Ç, –∫—É–¥–∏ –±—É–ª–æ –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
–©–æ–± –¥—ñ–∑–Ω–∞—Ç–∏—Å—è, —è–∫—ñ –¥–∞–Ω—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ, –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ [—á–∞—Å—Ç–∏–Ω—É –ø—Ä–æ `Message` –≤ –¥–æ–≤—ñ–¥–Ω–∏–∫—É Telegram Bot API](https://core.telegram.org/bots/api#message).
–ö—Ä—ñ–º —Ç–æ–≥–æ, –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è–º —É —Å–≤–æ—î–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ –∫–æ–¥—É, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –º–æ–∂–ª–∏–≤—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏.

–Ø–∫—â–æ –≤–∏ –∑–∞—Ä–µ—î—Å—Ç—Ä—É—î—Ç–µ —Å–≤—ñ–π –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è —ñ–Ω—à–∏—Ö —Ç–∏–ø—ñ–≤, `ctx` —Ç–∞–∫–æ–∂ –Ω–∞–¥–∞—Å—Ç—å –≤–∞–º —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –Ω–∏—Ö.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥:

```ts
bot.on("edited_message", async (ctx) => {
  // –û—Ç—Ä–∏–º—É—î–º–æ –Ω–æ–≤–∏–π, –≤—ñ–¥—Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∏–π, —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
  const editedText = ctx.editedMessage.text;
});
```

–ë–∞ –±—ñ–ª—å—à–µ, –≤–∏ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–± º—î–∫—Ç—É `Update` ([–¥–æ–≤—ñ–¥–∫–∞ Telegram Bot API](https://core.telegram.org/bots/api#update)), —è–∫–∏–π Telegram –Ω–∞–¥—Å–∏–ª–∞—î –≤–∞—à–æ–º—É –±–æ—Ç—É.
–¶–µ–π –æ–± º—î–∫—Ç –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (`ctx.update`) –º—ñ—Å—Ç–∏—Ç—å —É—Å—ñ –¥–∞–Ω—ñ, —è–∫—ñ —î –¥–∂–µ—Ä–µ–ª–æ–º —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –¥–ª—è `ctx.message` —Ç–∞ —ñ–Ω—à–∏—Ö –º–µ—Ç–æ–¥—ñ–≤.

–û–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–∞–≤–∂–¥–∏ –º—ñ—Å—Ç–∏—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–∞—à–æ–≥–æ –±–æ—Ç–∞, —è–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ `ctx.me`.

### –°–∫–æ—Ä–æ—á–µ–Ω—ñ –º–µ—Ç–æ–¥–∏

–î–ª—è –æ–± º—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫—ñ–ª—å–∫–∞ —Å–∫–æ—Ä–æ—á–µ–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤.

| –°–∫–æ—Ä–æ—á–µ–Ω–∏–π –º–µ—Ç–æ–¥      | –û–ø–∏—Å                                                                                                               |
| --------------------- | ------------------------------------------------------------------------------------------------------------------ |
| `ctx.msg`             | –ü–æ–≤–µ—Ä—Ç–∞—î –æ–± º—î–∫—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–Ω–∞–≤—ñ—Ç—å —Ä–µ–¥–∞–≥–æ–≤–∞–Ω–æ–≥–æ)                                                                 |
| `ctx.chat`            | –ü–æ–≤–µ—Ä—Ç–∞—î –æ–± º—î–∫—Ç —á–∞—Ç—É                                                                                               |
| `ctx.senderChat`      | –ü–æ–≤–µ—Ä—Ç–∞—î –æ–± º—î–∫—Ç —á–∞—Ç—É –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞ –∑ `ctx.msg` (–¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑ –∞–Ω–æ–Ω—ñ–º–Ω–∏—Ö –∫–∞–Ω–∞–ª—ñ–≤/–≥—Ä—É–ø)                            |
| `ctx.from`            | –ü–æ–≤–µ—Ä—Ç–∞—î –∞–≤—Ç–æ—Ä–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∑–∞–ø–∏—Ç—É –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É —Ç–æ—â–æ                                                       |
| `ctx.inlineMessageId` | –ü–æ–≤–µ—Ä—Ç–∞—î —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É –∞–±–æ –≤–∏–±—Ä–∞–Ω–∏—Ö –≤–±—É–¥–æ–≤–∞–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ |
| `ctx.entities`        | –ü–æ–≤–µ—Ä—Ç–∞—î —Å—É—Ç–Ω–æ—Å—Ç—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∞ —ó—Ö–Ω—ñ–π —Ç–µ–∫—Å—Ç, –Ω–µ–æ–±–æ–≤ º—è–∑–∫–æ–≤–æ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏–π –∑–∞ —Ç–∏–ø–æ–º —Å—É—Ç–Ω–æ—Å—Ç—ñ                     |
| `ctx.reactions`       | –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∞–∫—Ü—ñ—ó –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ [–∑—Ä—É—á–Ω–æ–º—É –¥–ª—è —Ä–æ–±–æ—Ç–∏ –≤–∏–≥–ª—è–¥—ñ](./reactions#–ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ-—è–∫-–∑–º—ñ–Ω–∏–ª–∏—Å—è-—Ä–µ–∞–∫—Ü—ñ—ñ)         |

–Ü–Ω—à–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ:

```ts
bot.on("message", async (ctx) => {
  // –û—Ç—Ä–∏–º—É—î–º–æ —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
  const text = ctx.msg.text;
});

bot.on("edited_message", async (ctx) => {
  // –û—Ç—Ä–∏–º—É—î–º–æ –Ω–æ–≤–∏–π, –≤—ñ–¥—Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∏–π, —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
  const editedText = ctx.msg.text;
});

bot.on("message:entities", async (ctx) => {
  // –û—Ç—Ä–∏–º—É—î–º–æ –≤—Å—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ.
  const entities = ctx.entities();

  // –û—Ç—Ä–∏–º—É—î–º–æ —Ç–µ–∫—Å—Ç –ø–µ—Ä—à–æ—ó —Å—É—Ç–Ω–æ—Å—Ç—ñ.
  entities[0].text;

  // –û—Ç—Ä–∏–º—É—î–º–æ —Å—É—Ç–Ω–æ—Å—Ç—ñ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ—ó –ø–æ—à—Ç–∏.
  const emails = ctx.entities("email");

  // –û—Ç—Ä–∏–º—É—î–º–æ —Å—É—Ç–Ω–æ—Å—Ç—ñ —Ç–µ–ª–µ—Ñ–æ–Ω—É —Ç–∞ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ—ó –ø–æ—à—Ç–∏.
  const phonesAndEmails = ctx.entities(["email", "phone"]);
});

bot.on("message_reaction", (ctx) => {
  const { emojiAdded } = ctx.reactions();
  if (emojiAdded.includes("üéâ")) {
    await ctx.reply("–∑–∞–ø—Ä–æ—à—É—î–º–æ –Ω–∞ –≤–µ—á—ñ—Ä–∫–£");
  }
});
```

> –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ [—Ä–æ–∑–¥—ñ–ª –ø—Ä–æ —Ä–µ–∞–∫—Ü—ñ—ó](./reactions), —è–∫—â–æ –≤–æ–Ω–∏ –≤–∞—Å –∑–∞—Ü—ñ–∫–∞–≤–∏–ª–∏.

–û—Ç–∂–µ, —è–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ, –≤–∏ –º–æ–∂–µ—Ç–µ –∑–∞–±—É—Ç–∏ –ø—Ä–æ `ctx.message` —ñ `ctx.channelPost`, —ñ `ctx.editedMessage`, —ñ —Ç.–¥., —ñ —Ç.–ø., —Ç–∞ –∑–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–∞–º—ñ—Å—Ç—å –Ω–∏—Ö `ctx.msg`.

## –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ has –ø–µ—Ä–µ–≤—ñ—Ä–∫—É

–û–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –º–∞—î –¥–µ–∫—ñ–ª—å–∫–∞ –º–µ—Ç–æ–¥—ñ–≤, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–µ–≤–Ω–∏—Ö –¥–∞–Ω–∏—Ö —É –≤–º—ñ—Å—Ç—ñ.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `ctx.hasCommand("start")`, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –º—ñ—Å—Ç–∏—Ç—å –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∫–æ–º–∞–Ω–¥—É `/start`.
–û—Å—å —á–æ–º—É –º–µ—Ç–æ–¥–∏ –º–∞—é—Ç—å –∑–∞–≥–∞–ª—å–Ω—É –Ω–∞–∑–≤—É _has –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞_.

::: tip –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ has –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
–¶–µ —Ç–æ—á–Ω–æ —Ç–∞ –∂ –ª–æ–≥—ñ–∫–∞, —è–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `bot.command("start")`.
–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ –∑–∞–∑–≤–∏—á–∞–π —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ [—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤](./filter-queries) —ñ –ø–æ–¥—ñ–±–Ω—ñ –º–µ—Ç–æ–¥–∏.
–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è has –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫ –Ω–∞–π–∫—Ä–∞—â–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ [–ø–ª–∞–≥—ñ–Ω—ñ —Ä–æ–∑–º–æ–≤](../plugins/conversations).
:::

has –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–≤—É–∂—É—é—Ç—å —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –¥–∞–Ω–∏—Ö –∑–∞–ø–∏—Ç—É –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É –ø–æ–≤—ñ–¥–æ–º–∏—Ç—å TypeScript, —â–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –ø—Ä–∏—Å—É—Ç–Ω—î –ø–æ–ª–µ `ctx.callbackQuery.data`.

```ts
if (ctx.hasCallbackQuery(/query-data-\d+/)) {
  // –¢–µ–ø–µ—Ä –≤—ñ–¥–æ–º–æ, —â–æ –ø–æ–ª–µ `ctx.callbackQuery.data` –ø—Ä–∏—Å—É—Ç–Ω—î
  const data: string = ctx.callbackQuery.data;
}
```

–¢–µ —Å–∞–º–µ —Å—Ç–æ—Å—É—î—Ç—å—Å—è –≤—Å—ñ—Ö —ñ–Ω—à–∏—Ö –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫.
–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ [–¥–æ–≤—ñ–¥–∫—É API –ø—Ä–æ –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É](/ref/core/context#has), —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö has –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫.
–¢–∞–∫–æ–∂ –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ —Å—Ç–∞—Ç–∏—á–Ω—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `Context.has` —É [–¥–æ–≤—ñ–¥—Ü—ñ API](/ref/core/context#has), —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ –ø—Ä–µ–¥–∏–∫–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –æ–± º—î–∫—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.

## –î–æ—Å—Ç—É–ø–Ω—ñ –¥—ñ—ó

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–µ:

```ts
bot.on("message", async (ctx) => {
  // –û—Ç—Ä–∏–º—É—î–º–æ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —á–∞—Ç—É.
  const chatId = ctx.msg.chat.id;
  // –¢–µ–∫—Å—Ç –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.
  const text = "–Ø –æ—Ç—Ä–∏–º–∞–≤ —Ç–≤–æ—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è!";
  // –ù–∞–¥—Å–∏–ª–∞—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å.
  await bot.api.sendMessage(chatId, text);
});
```

–í–∏ –º–æ–∂–µ—Ç–µ –ø–æ–º—ñ—Ç–∏—Ç–∏ –¥–≤—ñ —Ä–µ—á—ñ, —è–∫—ñ –Ω–µ —î –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–º–∏ –≤ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ:

1. –ú–∏ –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –æ–± º—î–∫—Ç–∞ `bot`.
   –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –Ω–∞–º –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –æ–± º—î–∫—Ç `bot` –ø–æ –≤—Å—ñ–π –∫–æ–¥–æ–≤—ñ–π –±–∞–∑—ñ, —â–æ–± –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏, —â–æ –¥—Ä–∞—Ç—É—î, –∫–æ–ª–∏ —É –≤–∞—Å –±—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É —ñ –≤–∏ –≤–∏–∑–Ω–∞—á–∞—î—Ç–µ –æ–±—Ä–æ–±–Ω–∏–∫ –¥–µ—Å—å –≤ —ñ–Ω—à–æ–º—É –º—ñ—Å—Ü—ñ.
2. –ú–∏ –ø–æ–≤–∏–Ω–Ω—ñ –≤–∏–ª—É—á–∏—Ç–∏ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —á–∞—Ç—É –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ç–∞ –∑–Ω–æ–≤—É —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ –π–æ–≥–æ –≤ `sendMessage`.
   –¶–µ —Ç–µ–∂ –¥—Ä–∞—Ç—É—î, —Ç–æ–º—É —â–æ –≤–∏, —à–≤–∏–¥—à–µ –∑–∞ –≤—Å–µ, –∑–∞–≤–∂–¥–∏ —Ö–æ—á–µ—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ —Ç–æ–º—É —Å–∞–º–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ, —è–∫–∏–π –Ω–∞–¥—ñ—Å–ª–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
   –£—è–≤—ñ—Ç—å, —è–∫ —á–∞—Å—Ç–æ –≤–∏ –≤–≤–æ–¥–∏—Ç–µ —Ç–µ —Å–∞–º–µ –∑–Ω–æ–≤—É —ñ –∑–Ω–æ–≤—É!

–©–æ–¥–æ –ø–µ—Ä—à–æ–≥–æ –ø—É–Ω–∫—Ç—É –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –ø—Ä–æ—Å—Ç–æ –Ω–∞–¥–∞—î –≤–∞–º –¥–æ—Å—Ç—É–ø –¥–æ —Ç–æ–≥–æ —Å–∞–º–æ–≥–æ –æ–± º—î–∫—Ç–∞ API, —è–∫–∏–π –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ –≤ `bot.api`, –≤—ñ–Ω –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è `ctx.api`.
–¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ –∑–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –Ω–∞–ø–∏—Å–∞—Ç–∏ `ctx.api.sendMessage`, —ñ –≤–∞–º –±—ñ–ª—å—à–µ –Ω–µ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –æ–± º—î–∫—Ç `bot`.
–ó—Ä—É—á–Ω–æ.

–û–¥–Ω–∞–∫ —Å–ø—Ä–∞–≤–∂–Ω—è —Å–∏–ª–∞ –ø–æ–ª—è–≥–∞—î —É –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—ñ –¥—Ä—É–≥–æ–≥–æ –ø—É–Ω–∫—Ç—É.
–û–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –¥–æ–∑–≤–æ–ª—è—î –ø—Ä–æ—Å—Ç–æ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —Ç–∞–∫:

```ts
bot.on("message", async (ctx) => {
  await ctx.reply("–Ø –æ—Ç—Ä–∏–º–∞–≤ —Ç–≤–æ—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è!");
});

// –ê–±–æ —â–µ –∫–æ—Ä–æ—Ç—à–µ:
bot.on("message", (ctx) => ctx.reply("–í–ø—ñ–π–º–∞–≤!"));
```

–õ–∞–∫–æ–Ω—ñ—á–Ω–æ! :tada:

–ü—ñ–¥ –∫–∞–ø–æ—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç _–≤–∂–µ –∑–Ω–∞—î —Å–≤—ñ–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —á–∞—Ç—É_: `ctx.msg.chat.id`, —Ç–æ–º—É –≤—ñ–Ω –¥–∞—î –≤–∞–º –º–µ—Ç–æ–¥ `reply`, —â–æ–± –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É —Ç–æ–π —Å–∞–º–∏–π —á–∞—Ç.
–í—Å–µ—Ä–µ–¥–∏–Ω—ñ —Å–µ–±–µ `reply` –∑–Ω–æ–≤—É –≤–∏–∫–ª–∏–∫–∞—î `sendMessage` —ñ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–º –¥–ª—è –≤–∞—Å —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–æ–º —á–∞—Ç—É.

–û—Ç–∂–µ, —É—Å—ñ –º–µ—Ç–æ–¥–∏ –æ–± º—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –ø—Ä–∏–π–º–∞—é—Ç—å –æ–± º—î–∫—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Ç–∏–ø—É `Other`, —è–∫ –ø–æ—è—Å–Ω—é–≤–∞–ª–æ—Å—è [—Ä–∞–Ω—ñ—à–µ](./basics#–Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å).
–¶–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –ø–æ–¥–∞–ª—å—à–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –∫–æ–∂–Ω–æ–º—É –≤–∏–∫–ª–∏–∫—É API.

::: tip –§—É–Ω–∫—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ Telegram
–ù–µ–∑–≤–∞–∂–∞—é—á–∏ –Ω–∞ —Ç–µ, —â–æ –≤ grammY (—Ç–∞ –±–∞–≥–∞—Ç—å–æ—Ö —ñ–Ω—à–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö) –º–µ—Ç–æ–¥ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è `ctx.reply`, –≤—ñ–Ω –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î [—Ñ—É–Ω–∫—Ü—ñ—é –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ Telegram](https://telegram.org/blog/replies-mentions-hashtags#replies) –¥–µ —î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.

–Ø–∫—â–æ –≤–∏ –ø–æ–¥–∏–≤–∏—Ç–µ—Å—è —É [–¥–æ–≤—ñ–¥–Ω–∏–∫—É Bot API](https://core.telegram.org/bots/api#sendmessage), —â–æ –º–æ–∂–µ —Ä–æ–±–∏—Ç–∏ `sendMessage`, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –∫—ñ–ª—å–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤: `parse_mode`, `link_preview_options` —ñ `reply_parameters`.
–û—Å—Ç–∞–Ω–Ω—î –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é:

```ts
await ctx.reply("^ –¶–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è!", {
  reply_parameters: { message_id: ctx.msg.message_id },
});
```

–¢–æ–π —Å–∞–º–∏–π –æ–± º—î–∫—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ –≤ `bot.api.sendMessage` —ñ `ctx.api.sendMessage`.
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—Ä—è–º–æ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ –∫–æ–¥—É.
:::

–ó–≤–∏—á–∞–π–Ω–æ, –∫–æ–∂–µ–Ω —ñ–Ω—à–∏–π –º–µ—Ç–æ–¥ —É `ctx.api` –º–∞—î –∫–æ—Ä–æ—Ç–∫–∏–π –º–µ—Ç–æ–¥ —ñ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏: `ctx.replyWithPhoto`, —â–æ–± –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—î—é, –∞–±–æ `ctx.exportChatInviteLink`, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ —á–∞—Ç—É.
–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω–µ —É—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ —Ç–µ, —è–∫—ñ –∫–æ—Ä–æ—Ç–∫—ñ –º–µ—Ç–æ–¥–∏ —ñ—Å–Ω—É—é—Ç—å, —Ç–æ–¥—ñ –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è —Å—Ç–∞–Ω–µ –≤–∞—à–∏–º –¥—Ä—É–≥–æ–º —Ä–∞–∑–æ–º —ñ–∑ [–¥–æ–≤—ñ–¥–∫–æ—é API grammY](/ref/core/context).

–ú–æ–∂–ª–∏–≤–æ, –≤–∞–º –Ω–µ –∑–∞–≤–∂–¥–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–µ–∞–≥—É–≤–∞—Ç–∏ –≤ —Ç–æ–º—É –∂ —á–∞—Ç—ñ.
–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ `ctx.api` —ñ –≤–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—ñ–¥ —á–∞—Å —ó—Ö –≤–∏–∫–ª–∏–∫—É.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –ê–ª—ñ—Å–∏ —Ç–∞ —Ö–æ—á–µ—Ç–µ –≤—ñ–¥—Ä–µ–∞–≥—É–≤–∞—Ç–∏, –Ω–∞–¥—ñ—Å–ª–∞–≤—à–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ë–æ–±—É, –≤–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `ctx.reply`, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –∑–∞–≤–∂–¥–∏ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏–º–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ —á–∞—Ç—É –∑ –ê–ª—ñ—Å–æ—é.
–ù–∞—Ç–æ–º—ñ—Å—Ç—å –≤–∏–∫–ª–∏—á—Ç–µ `ctx.api.sendMessage` —ñ –≤–∫–∞–∂—ñ—Ç—å —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —á–∞—Ç—É –ë–æ–±–∞.

## –Ø–∫ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –æ–± º—î–∫—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

–©–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –≤–∞—à –±–æ—Ç –æ—Ç—Ä–∏–º—É—î –Ω–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ Telegram, –≤–æ–Ω–æ –∑–∞–≥–æ—Ä—Ç–∞—î—Ç—å—Å—è –≤ –æ–± º—î–∫—Ç –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.
–ù–∞—Å–ø—Ä–∞–≤–¥—ñ –æ–± º—î–∫—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ –Ω–µ –ª–∏—à–µ –Ω–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∞ –π —É—Å—ñ —ñ–Ω—à—ñ —Ä–µ—á—ñ, —è–∫-–æ—Ç —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ [–±–∞–≥–∞—Ç–æ —ñ–Ω—à–æ–≥–æ](https://core.telegram.org/bots/api#update).

–ù–æ–≤–∏–π –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –≤–∏–∫–ª—é—á–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤—Ö—ñ–¥–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.
–ö–æ–Ω—Ç–µ–∫—Å—Ç–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ–ø–æ–≤ º—è–∑–∞–Ω—ñ –æ–± º—î–∫—Ç–∏, –≤–æ–Ω–∏ –ª–∏—à–µ –ø–æ—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ —Ç—É —Å–∞–º—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ `ctx.me`.

–¢–æ–π —Å–∞–º–∏–π –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –¥–ª—è –æ–¥–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±—É–¥–µ —Å–ø—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –≤—Å—ñ–º–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–º–∏ –Ω–∞ –±–æ—Ç—ñ –ø—Ä–æ–º—ñ–∂–Ω–∏–º–∏ –æ–±—Ä–æ–±–Ω–∏–∫–∞–º–∏ ([–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](./middleware)).

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ–± º—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

> –Ø–∫—â–æ –≤–∏ –≤–ø–µ—Ä—à–µ –∑–Ω–∞–π–æ–º–∏—Ç–µ—Å—è –∑ –æ–± º—î–∫—Ç–∞–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, –≤–∞–º –Ω–µ –æ–±–æ–≤ º—è–∑–∫–æ–≤–æ –ø—Ä–∏–¥—ñ–ª—è—Ç–∏ —É–≤–∞–≥—É —Ä–µ—à—Ç—ñ —Ü—ñ—î—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

–ó–∞ –±–∞–∂–∞–Ω–Ω—è–º –≤–∏ –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤–ª–∞—Å–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –≤ –æ–± º—î–∫—Ç—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.

### –ß–µ—Ä–µ–∑ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–∂–Ω–∞ –ª–µ–≥–∫–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ –≤ [–ø—Ä–æ–º—ñ–∂–Ω–æ–º—É –æ–±—Ä–æ–±–Ω–∏–∫—É](./middleware).

::: tip –ü—Ä–æ–º—ñ–∂–Ω–∏–π... —â–æ?
–¶–µ–π —Ä–æ–∑–¥—ñ–ª –ø–æ—Ç—Ä–µ–±—É—î —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤, —Ç–æ–º—É, —è–∫—â–æ –≤–∏ —â–µ –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–ª–∏ –¥–æ [—Ä–æ–∑–¥—ñ–ª—É –ø—Ä–æ –ø—Ä–æ–º—ñ–∂–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏](./middleware), –æ—Å—å –¥—É–∂–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—ñ–¥—Å—É–º–æ–∫.

–í—Å–µ, —â–æ –≤–∞–º —Å–ø—Ä–∞–≤–¥—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞—Ç–∏, —Ü–µ —Ç–µ, —â–æ –∫—ñ–ª—å–∫–∞ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –º–æ–∂—É—Ç—å –æ–±—Ä–æ–±–ª—è—Ç–∏ –æ–¥–∏–Ω –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
–Ü—Å–Ω—É—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏, —è–∫—ñ –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ `ctx` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –±—É–¥—å-—è–∫–∏—Ö —ñ–Ω—à–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤, —ñ –∑–º—ñ–Ω–∏ –ø–µ—Ä—à–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ –±—É–¥—É—Ç—å –≤–∏–¥–∏–º—ñ –¥–ª—è –≤—Å—ñ—Ö –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤.
:::

–Ü–¥–µ—è –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ–± –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –ø–µ—Ä–µ–¥ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—î—é —ñ–Ω—à–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤.
–ü–æ—Ç—ñ–º –≤–∏ –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –≤ —Ü–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö.
–Ø–∫—â–æ –≤–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç–µ `ctx.yourCustomPropertyName = yourCustomValue` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ç–∞–∫–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞, —Ç–æ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `ctx.yourCustomPropertyName` —Ç–∞–∫–æ–∂ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö.

–î–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó –ø—Ä–∏–ø—É—Å—Ç—ñ–º–æ, —â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `ctx.config` –¥–ª—è –æ–± º—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –º–∏ –±—É–¥–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–µ—è–∫–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –ø—Ä–æ—î–∫—Ç—É, —â–æ–± —É—Å—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –º–∞–ª–∏ –¥–æ –Ω–∏—Ö –¥–æ—Å—Ç—É–ø.
–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª–µ–≥—à–∏—Ç—å –≤–∏—è–≤–ª–µ–Ω–Ω—è —Ç–æ–≥–æ, –∫–∏–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –±–æ—Ç: –π–æ–≥–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–æ–º —á–∏ –∑–≤–∏—á–∞–π–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º.

–í—ñ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–æ—Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ:

```ts
const BOT_DEVELOPER = 123456; // —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —á–∞—Ç—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ –±–æ—Ç–∞

bot.use(async (ctx, next) => {
  // –ó–º—ñ–Ω—é—î–º–æ –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, –≤—Å—Ç–∞–Ω–æ–≤–∏–≤—à–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è.
  ctx.config = {
    botDeveloper: BOT_DEVELOPER,
    isDeveloper: ctx.from?.id === BOT_DEVELOPER,
  };
  // –ó–∞–ø—É—Å–∫–∞—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏.
  await next();
});
```

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `ctx.config` –≤ —ñ–Ω—à–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö.

```ts
bot.command("start", async (ctx) => {
  // –ü—Ä–∞—Ü—é—î–º–æ —Ç—É—Ç –∑—ñ –∑–º—ñ–Ω–µ–Ω–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º!
  if (ctx.config.isDeveloper) await ctx.reply("–ü—Ä–∏–≤—ñ—Ç, –º–∞!! <3");
  else await ctx.reply("–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ, –ª—é–¥–∏–Ω–æ!");
});
```

–û–¥–Ω–∞–∫ –≤–∏ –ø–æ–º—ñ—Ç–∏—Ç–µ, —â–æ TypeScript –Ω–µ –∑–Ω–∞—î, —â–æ `ctx.config` –¥–æ—Å—Ç—É–ø–Ω–∏–π, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –º–∏ –ø—Ä–∏–∑–Ω–∞—á–∞—î–º–æ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
–¢–∞–∫–∏–º —á–∏–Ω–æ–º, —Ö–æ—á–∞ –∫–æ–¥ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, –≤—ñ–Ω –Ω–µ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è.
–©–æ–± –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ —Ü–µ, –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ç–∞ –¥–æ–¥–∞—Ç–∏ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å.

```ts
interface BotConfig {
  botDeveloper: number;
  isDeveloper: boolean;
}

type MyContext = Context & {
  config: BotConfig;
};
```

–ù–æ–≤–∏–π —Ç–∏–ø `MyContext` —Ç–µ–ø–µ—Ä —Ç–æ—á–Ω–æ –æ–ø–∏—Å—É—î –æ–± º—î–∫—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, —è–∫—ñ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –æ–±—Ä–æ–±–ª—è—î –Ω–∞—à –±–æ—Ç.

> –í–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–∞–±–µ–∑–ø–µ—á—É–≤–∞—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é —Ç–∏–ø—ñ–≤ —ñ–∑ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏, —è–∫—ñ –≤–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç–µ.

–ú–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–æ–≤–∏–π —Ç–∏–ø, –ø–µ—Ä–µ–¥–∞–≤—à–∏ –π–æ–≥–æ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `Bot`.

```ts
const bot = new Bot<MyContext>("");
```

–£ –ø—ñ–¥—Å—É–º–∫—É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–∏–≥–ª—è–¥–∞—Ç–∏–º—É—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:

::: code-group

```ts [TypeScript]
const BOT_DEVELOPER = 123456; // —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —á–∞—Ç—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ –±–æ—Ç–∞

// –í–∏–∑–Ω–∞—á–∞—î–º–æ –≤–ª–∞—Å–Ω–∏–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
interface BotConfig {
  botDeveloper: number;
  isDeveloper: boolean;
}
type MyContext = Context & {
  config: BotConfig;
};

const bot = new Bot<MyContext>("");

// –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –Ω–∞—Å—Ç—Ä–æ—é–≤–∞–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –æ–± º—î–∫—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
bot.use(async (ctx, next) => {
  ctx.config = {
    botDeveloper: BOT_DEVELOPER,
    isDeveloper: ctx.from?.id === BOT_DEVELOPER,
  };
  await next();
});

// –í–∏–∑–Ω–∞—á–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ –¥–ª—è –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏—Ö –æ–± º—î–∫—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
bot.command("start", async (ctx) => {
  if (ctx.config.isDeveloper) await ctx.reply("–ü—Ä–∏–≤—ñ—Ç, –º–∞!");
  else await ctx.reply("–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ");
});
```

```js [JavaScript]
const BOT_DEVELOPER = 123456; // —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —á–∞—Ç—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ –±–æ—Ç–∞

const bot = new Bot("");

// –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –Ω–∞—Å—Ç—Ä–æ—é–≤–∞–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –æ–± º—î–∫—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
bot.use(async (ctx, next) => {
  ctx.config = {
    botDeveloper: BOT_DEVELOPER,
    isDeveloper: ctx.from?.id === BOT_DEVELOPER,
  };
  await next();
});

// –í–∏–∑–Ω–∞—á–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ –¥–ª—è –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏—Ö –æ–± º—î–∫—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
bot.command("start", async (ctx) => {
  if (ctx.config.isDeveloper) await ctx.reply("–ü—Ä–∏–≤—ñ—Ç, –º–∞!");
  else await ctx.reply("–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ");
});
```

:::

–ó–≤–∏—á–∞–π–Ω–æ, –≤–ª–∞—Å–Ω–∏–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ç–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ —ñ–Ω—à–∏–º —Ä–µ—á–∞–º, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –∑ –ø—Ä–æ–º—ñ–∂–Ω–∏–º–∏ –æ–±—Ä–æ–±–Ω–∏–∫–∞–º–∏, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ –≤ [Composer](/ref/core/composer).

```ts
const composer = new Composer<MyContext>();
```

–î–µ—è–∫—ñ –ø–ª–∞–≥—ñ–Ω–∏ —Ç–∞–∫–æ–∂ –≤–∏–º–∞–≥–∞—Ç–∏–º—É—Ç—å –ø–µ—Ä–µ–¥–∞—á—ñ –≤–ª–∞—Å–Ω–æ–≥–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, —è–∫-–æ—Ç –ø–ª–∞–≥—ñ–Ω [–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä](../plugins/router) –∞–±–æ –ø–ª–∞–≥—ñ–Ω [—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö –º–µ–Ω—é](../plugins/menu).
–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ —ó—Ö–Ω—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é, —â–æ–± –¥—ñ–∑–Ω–∞—Ç–∏—Å—è, —è–∫ –≤–æ–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –≤–ª–∞—Å–Ω–∏–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
–¶—ñ —Ç–∏–ø–∏ –Ω–∞–∑–∏–≤–∞—é—Ç—å—Å—è —Ä–æ–∑—à–∏—Ä—é–≤–∞—á—ñ, —è–∫ –æ–ø–∏—Å–∞–Ω–æ [—Ç—É—Ç](#—Ä–æ–∑—à–∏—Ä—é–≤–∞—á-–¥–ª—è-–∫–æ–Ω—Ç–µ–∫—Å—Ç—É).

### –ß–µ—Ä–µ–∑ —É—Å–ø–∞–¥–∫—É–≤–∞–Ω–Ω—è

–û–∫—Ä—ñ–º –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π –æ–± º—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª–∞—Å –∫–ª–∞—Å—É `Context`.

```ts
class MyContext extends Context {
  // ...
}
```

–û–¥–Ω–∞–∫ –º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –≤–∞–º –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–± º—î–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É [—á–µ—Ä–µ–∑ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫](#—á–µ—Ä–µ–∑-–ø—Ä–æ–º—ñ–∂–Ω–∏–∏-–æ–±—Ä–æ–±–Ω–∏–∫-—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ), –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –≥–Ω—É—á–∫—ñ—à–∏–π —ñ –∫—Ä–∞—â–µ –ø—Ä–∞—Ü—é—î, —è–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–ª–∞–≥—ñ–Ω–∏.

–ù—É–º–æ –¥–∏–≤–∏—Ç–∏—Å—è, —è–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –∫–ª–∞—Å–∏ –¥–ª—è –æ–± º—î–∫—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.

–ü—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–≤–æ–≥–æ –±–æ—Ç–∞ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤ –æ–± º—î–∫—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ –≤–∞—à –∫–ª–∞—Å –º–∞—î —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏ `Context`.

::: code-group

```ts [TypeScript]
import { Bot, Context } from "grammy";
import type { Update, UserFromGetMe } from "grammy/types";

// –í–∏–∑–Ω–∞—á–∞—î–º–æ –≤–ª–∞—Å–Ω–∏–π –∫–ª–∞—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
class MyContext extends Context {
  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –¥–µ—è–∫—ñ –≤–ª–∞—Å–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ.
  public readonly customProp: number;

  constructor(update: Update, api: Api, me: UserFromGetMe) {
    super(update, api, me);
    this.customProp = me.username.length * 42;
  }
}

// –ü–µ—Ä–µ–¥–∞—î–º–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —è–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä.
const bot = new Bot("", {
  ContextConstructor: MyContext,
});

bot.on("message", async (ctx) => {
  // `ctx` —Ç–µ–ø–µ—Ä –º–∞—î —Ç–∏–ø `MyContext`.
  const prop = ctx.customProp;
});

bot.start();
```

```js [JavaScript]
const { Bot, Context } = require("grammy");

// –í–∏–∑–Ω–∞—á–∞—î–º–æ –≤–ª–∞—Å–Ω–∏–π –∫–ª–∞—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
class MyContext extends Context {
  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –¥–µ—è–∫—ñ –≤–ª–∞—Å–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ.
  public readonly customProp;

  constructor(update, api, me) {
    super(update, api, me);
    this.customProp = me.username.length * 42;
  }
}

// –ü–µ—Ä–µ–¥–∞—î–º–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —è–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä.
const bot = new Bot("", {
  ContextConstructor: MyContext,
});

bot.on("message", async (ctx) => {
  // `ctx` —Ç–µ–ø–µ—Ä –º–∞—î —Ç–∏–ø `MyContext`.
  const prop = ctx.customProp;
});

bot.start();
```

```ts [Deno]
import { Bot, Context } from "https://deno.land/x/grammy/mod.ts";
import type {
  Update,
  UserFromGetMe,
} from "https://deno.land/x/grammy/types.ts";

// –í–∏–∑–Ω–∞—á–∞—î–º–æ –≤–ª–∞—Å–Ω–∏–π –∫–ª–∞—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
class MyContext extends Context {
  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –¥–µ—è–∫—ñ –≤–ª–∞—Å–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ.
  public readonly customProp: number;

  constructor(update: Update, api: Api, me: UserFromGetMe) {
    super(update, api, me);
    this.customProp = me.username.length * 42;
  }
}

// –ü–µ—Ä–µ–¥–∞—î–º–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —è–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä.
const bot = new Bot("", {
  ContextConstructor: MyContext,
});

bot.on("message", async (ctx) => {
  // `ctx` —Ç–µ–ø–µ—Ä –º–∞—î —Ç–∏–ø `MyContext`.
  const prop = ctx.customProp;
});

bot.start();
```

:::

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É –Ω–∞ —Ç–µ, —è–∫ –≤–ª–∞—Å–Ω–∏–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –±—É–¥–µ –≤–∏–≤–µ–¥–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ, –∫–æ–ª–∏ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ø—ñ–¥–∫–ª–∞—Å.
–í–∞–º –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–∏—Å–∞—Ç–∏ `Bot<MyContext>`, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∏ –≤–∂–µ –≤–∫–∞–∑–∞–ª–∏ —Å–≤—ñ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—ñ–¥–∫–ª–∞—Å—É –≤ –æ–± º—î–∫—Ç—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ `new Bot()`.

–û–¥–Ω–∞–∫ —Ü–µ –¥—É–∂–µ —É—Å–∫–ª–∞–¥–Ω—é—î, —è–∫—â–æ –Ω–µ —É–Ω–µ–º–æ–∂–ª–∏–≤–ª—é—î, –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω—ñ–≤, –æ—Å–∫—ñ–ª—å–∫–∏ –¥–ª—è –Ω–∏—Ö —á–∞—Å—Ç–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Ä–æ–∑—à–∏—Ä—é–≤–∞—á –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.

## –†–æ–∑—à–∏—Ä—é–≤–∞—á –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

–†–æ–∑—à–∏—Ä—é–≤–∞—á —Ü–µ —Å–ø–æ—Å—ñ–± –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ TypeScript –ø—Ä–æ –Ω–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –≤–∞—à–æ–≥–æ –æ–± º—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
–¶—ñ –Ω–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –º–æ–∂–Ω–∞ –ø–æ—Å—Ç–∞—á–∞—Ç–∏ –≤ –ø–ª–∞–≥—ñ–Ω–∞—Ö –∞–±–æ —ñ–Ω—à–∏—Ö –º–æ–¥—É–ª—è—Ö, –∞ –ø–æ—Ç—ñ–º –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —É –≤–∞—à–æ–º—É –±–æ—Ç—ñ.

–†–æ–∑—à–∏—Ä—é–≤–∞—á –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ç–∞–∫–æ–∂ –º–æ–∂–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–∏–ø–∏ —ñ—Å–Ω—É—é—á–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä, —è–∫—ñ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å—Å—è –ø–ª–∞–≥—ñ–Ω–∞–º–∏.

### –î–æ–¥–∞–≤–∞–ª—å–Ω–∏–π —Ä–æ–∑—à–∏—Ä—é–≤–∞—á

–Ø–∫ –±—É–ª–æ –∑–∞–∑–Ω–∞—á–µ–Ω–æ –≤–∏—â–µ, —ñ—Å–Ω—É—î –¥–≤–∞ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø–∏ —Ä–æ–∑—à–∏—Ä—é–≤–∞—á—ñ–≤.
–û—Å–Ω–æ–≤–Ω–∏–π –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è _–¥–æ–¥–∞–≤–∞–ª—å–Ω–∏–π —Ä–æ–∑—à–∏—Ä—é–≤–∞—á_, —ñ —â–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –º–∏ –≥–æ–≤–æ—Ä–∏–º–æ –ø—Ä–æ —Ä–æ–∑—à–∏—Ä—é–≤–∞—á –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É, –º–∏ –º–∞—î–º–æ –Ω–∞ —É–≤–∞–∑—ñ —Å–∞–º–µ —Ü–µ–π —Ç–∏–ø.
–î–∞–≤–∞–π—Ç–µ –ø–æ–¥–∏–≤–∏–º–æ—Å—è, —è–∫ —Ü–µ –ø—Ä–∞—Ü—é—î.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —É –≤–∞—Å —î [–¥–∞–Ω—ñ —Å–µ—Å—ñ—ó](../plugins/session), –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ `ctx.session` –¥–ª—è —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
–Ü–Ω–∞–∫—à–µ:

1. –≤–∏ –Ω–µ –∑–º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤–±—É–¥–æ–≤–∞–Ω–∏–π –ø–ª–∞–≥—ñ–Ω —Å–µ—Å—ñ—ó,
2. —É –≤–∞—Å –Ω–µ –±—É–¥–µ –¥–æ—Å—Ç—É–ø—É –¥–æ `ctx.session` —É –≤–∞—à–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö.

> –ù–µ–∑–≤–∞–∂–∞—é—á–∏ –Ω–∞ —Ç–µ, —â–æ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å–µ—Å—ñ—ó —è–∫ –ø—Ä–∏–∫–ª–∞–¥, –ø–æ–¥—ñ–±–Ω—ñ —Ä–µ—á—ñ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –¥–æ –±–∞–≥–∞—Ç—å–æ—Ö —ñ–Ω—à–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤.
> –ù–∞—Å–ø—Ä–∞–≤–¥—ñ –±—ñ–ª—å—à—ñ—Å—Ç—å –ø–ª–∞–≥—ñ–Ω—ñ–≤ –Ω–∞–¥–∞–¥—É—Ç—å –≤–∞–º —Ä–æ–∑—à–∏—Ä—é–≤–∞—á, —è–∫–∏–π –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.

–†–æ–∑—à–∏—Ä—é–≤–∞—á –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ü–µ –ø—Ä–æ—Å—Ç–æ –Ω–µ–≤–µ–ª–∏–∫–∏–π –Ω–æ–≤–∏–π —Ç–∏–ø, —è–∫–∏–π –≤–∏–∑–Ω–∞—á–∞—î –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ, —è–∫—ñ —Å–ª—ñ–¥ –¥–æ–¥–∞—Ç–∏ –¥–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
–î–∞–≤–∞–π—Ç–µ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –ø—Ä–∏–∫–ª–∞–¥ —Ä–æ–∑—à–∏—Ä—é–≤–∞—á–∞.

```ts
interface SessionFlavor<S> {
  session: S;
}
```

–¢–∏–ø `SessionFlavor` ([–¥–æ–≤—ñ–¥–∫–∞ API](/ref/core/sessionflavor)) –ø—Ä–æ—Å—Ç–∏–π: –≤—ñ–Ω –≤–∏–∑–Ω–∞—á–∞—î –ª–∏—à–µ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `session`.
–í—ñ–Ω –ø—Ä–∏–π–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–∏–ø—É, —è–∫–∏–π –≤–∏–∑–Ω–∞—á–∞—Ç–∏–º–µ —Ñ–∞–∫—Ç–∏—á–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö —Å–µ—Å—ñ—ó.

–ß–∏–º —Ü–µ –∫–æ—Ä–∏—Å–Ω–æ?
–û—Å—å —è–∫ –≤–∏ –º–æ–∂–µ—Ç–µ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ —Å–≤—ñ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –¥–∞–Ω–∏—Ö —Å–µ—Å—ñ—ó:

```ts
import { Context, SessionFlavor } from "grammy";

// –û–≥–æ–ª–æ—à—É—î–º–æ `ctx.session` —Ç–∏–ø—É `string`.
type MyContext = Context & SessionFlavor<string>;
```

–¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–ª–∞–≥—ñ–Ω —Å–µ—Å—ñ—ó —Ç–∞ –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ `ctx.session`:

```ts
bot.on("message", async (ctx) => {
  // –¢–µ–ø–µ—Ä `str` –º–∞—î —Ç–∏–ø `string`.
  const str = ctx.session;
});
```

### –ü–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞–ª—å–Ω–∏–π —Ä–æ–∑—à–∏—Ä—é–≤–∞—á

–Ü–Ω—à–∏–π —Ç–∏–ø —Ä–æ–∑—à–∏—Ä—é–≤–∞—á—ñ–≤ —î –±—ñ–ª—å—à –ø–æ—Ç—É–∂–Ω–∏–º.
–ó–∞–º—ñ—Å—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `&`, –π–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ç–∞–∫:

```ts
import { Context } from "grammy";
import { SomeFlavorA } from "my-plugin";

type MyContext = SomeFlavorA<Context>;
```

–í—Å–µ —ñ–Ω—à–µ –ø—Ä–∞—Ü—é—î —Ç–∞–∫ —Å–∞–º–æ.

–ö–æ–∂–µ–Ω –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –ø–ª–∞–≥—ñ–Ω –∑–∞–∑–Ω–∞—á–∞—î —É —Å–≤–æ—ó–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó, —á–∏ –º–∞—î –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑ –¥–æ–¥–∞–≤–∞–ª—å–Ω–∏–π –∞–±–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞–ª—å–Ω–∏–π —Ä–æ–∑—à–∏—Ä—é–≤–∞—á.

### –ü–æ—î–¥–Ω–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Ä–æ–∑—à–∏—Ä—é–≤–∞—á—ñ–≤

–Ø–∫—â–æ —É –≤–∞—Å —î —Ä—ñ–∑–Ω—ñ [–¥–æ–¥–∞–≤–∞–ª—å–Ω—ñ —Ä–æ–∑—à–∏—Ä—é–≤–∞—á—ñ](#–¥–æ–¥–∞–≤–∞–ª—å–Ω–∏–∏-—Ä–æ–∑—à–∏—Ä—é–≤–∞—á), –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —ó—Ö –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:

```ts
type MyContext = Context & FlavorA & FlavorB & FlavorC;
```

–ü–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ–¥–∞–≤–∞–ª—å–Ω–∏—Ö —Ä–æ–∑—à–∏—Ä—é–≤–∞—á—ñ–≤ –Ω–µ –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è, –≤–∏ –º–æ–∂–µ—Ç–µ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ —ó—Ö —è–∫ –≤–∞–º –∑–∞–º–∞–Ω–µ—Ç—å—Å—è.

–ö—ñ–ª—å–∫–∞ [–ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞–ª—å–Ω–∏—Ö —Ä–æ–∑—à–∏—Ä—é–≤–∞—á—ñ–≤](#–ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞–ª—å–Ω–∏–∏-—Ä–æ–∑—à–∏—Ä—é–≤–∞—á) —Ç–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏:

```ts
type MyContext = FlavorX<FlavorY<FlavorZ<Context>>>;
```

–¢—É—Ç –ø–æ—Ä—è–¥–æ–∫ –º–æ–∂–µ –º–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è, –æ—Å–∫—ñ–ª—å–∫–∏ —Å–ø–æ—á–∞—Ç–∫—É `Context` –±—É–¥–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–æ `FlavorZ`, –ø–æ—Ç—ñ–º `FlavorY`, —ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ü—å–æ–≥–æ –±—É–¥–µ –∑–Ω–æ–≤—É –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–æ –≤–∂–µ `FlavorX`.

–í–∏ –Ω–∞–≤—ñ—Ç—å –º–æ–∂–µ—Ç–µ –∑–º—ñ—à—É–≤–∞—Ç–∏ –¥–æ–¥–∞–≤–∞–ª—å–Ω—ñ —Ç–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞–ª—å–Ω—ñ —Ä–æ–∑—à–∏—Ä—é–≤–∞—á—ñ:

```ts
type MyContext = FlavorX<
  FlavorY<
    FlavorZ<
      Context & FlavorA & FlavorB & FlavorC
    >
  >
>;
```

–û–±–æ–≤ º—è–∑–∫–æ–≤–æ –¥–æ—Ç—Ä–∏–º—É–π—Ç–µ—Å—è —Ü—å–æ–≥–æ —à–∞–±–ª–æ–Ω—É –ø—ñ–¥ —á–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –ø–ª–∞–≥—ñ–Ω—ñ–≤.
–Ü—Å–Ω—É—î —Ä—è–¥ –ø–æ–º–∏–ª–æ–∫ —Ç–∏–ø—ñ–≤, —è–∫—ñ –≤–∏–Ω–∏–∫–∞—é—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –ø–æ—î–¥–Ω–∞–Ω–Ω—è –¥–µ–∫—ñ–ª—å–∫–æ—Ö —Ä–æ–∑—à–∏—Ä—é–≤–∞—á—ñ–≤.
